<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: apps/process_server/src/state.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('process__server_2src_2state_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">state.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Global statuc struct &amp; helper functions for process server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="process__server_2src_2state_8h_source.html">state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
<code>#include &lt;simple/simple.h&gt;</code><br />
<code>#include &lt;sel4platsupport/platsupport.h&gt;</code><br />
<code>#include &lt;sel4platsupport/plat/serial.h&gt;</code><br />
<code>#include &lt;sel4debug/debug.h&gt;</code><br />
<code>#include &lt;autoconf.h&gt;</code><br />
<code>#include &lt;<a class="el" href="refos_8h_source.html">refos/refos.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rpc_8h_source.html">refos-rpc/rpc.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a85c08bab931a4ea6d84cce631edfb1ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a85c08bab931a4ea6d84cce631edfb1ef">PROCSERV_IRQ_HANDLER_HASHTABLE_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a85c08bab931a4ea6d84cce631edfb1ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b3f1cd70a32e0b7b17464130a011ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#aa3b3f1cd70a32e0b7b17464130a011ab">ALLOCATOR_VIRTUAL_POOL_SIZE</a>&#160;&#160;&#160;((1 &lt;&lt; seL4_PageBits) * 100)</td></tr>
<tr class="separator:aa3b3f1cd70a32e0b7b17464130a011ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4bca8963791ae0caffc01d61a32ae5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#aee4bca8963791ae0caffc01d61a32ae5">CONFIG_PROCSERV_INITIAL_MEM_SIZE</a>&#160;&#160;&#160;(4096 * 32)</td></tr>
<tr class="separator:aee4bca8963791ae0caffc01d61a32ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a82ff8f676bc401776e2954942f01df8d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a82ff8f676bc401776e2954942f01df8d">faketime</a> ()</td></tr>
<tr class="memdesc:a82ff8f676bc401776e2954942f01df8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fake time, useful for debugging.  <a href="process__server_2src_2state_8c.html#a82ff8f676bc401776e2954942f01df8d">More...</a><br /></td></tr>
<tr class="separator:a82ff8f676bc401776e2954942f01df8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0034b8e6e423ddf45b8288566d8adaf9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a0034b8e6e423ddf45b8288566d8adaf9">procserv_nameserv_callback_free_cap</a> (seL4_CPtr cap)</td></tr>
<tr class="memdesc:a0034b8e6e423ddf45b8288566d8adaf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The free EP cap callback function, used by the nameserv implementation helper library.  <a href="process__server_2src_2state_8c.html#a0034b8e6e423ddf45b8288566d8adaf9">More...</a><br /></td></tr>
<tr class="separator:a0034b8e6e423ddf45b8288566d8adaf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb4c9f23d6fa1af6f8da16d3aa7d899"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#aeeb4c9f23d6fa1af6f8da16d3aa7d899">initialise_welcome_message</a> (seL4_BootInfo *info)</td></tr>
<tr class="memdesc:aeeb4c9f23d6fa1af6f8da16d3aa7d899"><td class="mdescLeft">&#160;</td><td class="mdescRight">display a heartwarming welcome message.  <a href="process__server_2src_2state_8c.html#aeeb4c9f23d6fa1af6f8da16d3aa7d899">More...</a><br /></td></tr>
<tr class="separator:aeeb4c9f23d6fa1af6f8da16d3aa7d899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7887a02bb51e0d6f4282771b296742a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#ac7887a02bb51e0d6f4282771b296742a">initialise_allocator</a> (seL4_BootInfo *info, struct <a class="el" href="structprocserv__state.html">procserv_state</a> *s)</td></tr>
<tr class="memdesc:ac7887a02bb51e0d6f4282771b296742a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the kernel object allocator.  <a href="process__server_2src_2state_8c.html#ac7887a02bb51e0d6f4282771b296742a">More...</a><br /></td></tr>
<tr class="separator:ac7887a02bb51e0d6f4282771b296742a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a702e4c445b00fbb4e8e84f86e4438bd7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a702e4c445b00fbb4e8e84f86e4438bd7">initialise_modules</a> (struct <a class="el" href="structprocserv__state.html">procserv_state</a> *s)</td></tr>
<tr class="memdesc:a702e4c445b00fbb4e8e84f86e4438bd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the process server modules.  <a href="process__server_2src_2state_8c.html#a702e4c445b00fbb4e8e84f86e4438bd7">More...</a><br /></td></tr>
<tr class="separator:a702e4c445b00fbb4e8e84f86e4438bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8901b56e6df143836279de099a9f703"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#ad8901b56e6df143836279de099a9f703">initialise</a> (seL4_BootInfo *info, struct <a class="el" href="structprocserv__state.html">procserv_state</a> *s)</td></tr>
<tr class="memdesc:ad8901b56e6df143836279de099a9f703"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the process server.  <a href="process__server_2src_2state_8c.html#ad8901b56e6df143836279de099a9f703">More...</a><br /></td></tr>
<tr class="separator:ad8901b56e6df143836279de099a9f703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6a46d89e9ab943f71fe7339ecabd103"><td class="memItemLeft" align="right" valign="top">cspacepath_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#ad6a46d89e9ab943f71fe7339ecabd103">procserv_mint_badge</a> (int badge)</td></tr>
<tr class="memdesc:ad6a46d89e9ab943f71fe7339ecabd103"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a generic minted badge using the process server's EP.  <a href="process__server_2src_2state_8c.html#ad6a46d89e9ab943f71fe7339ecabd103">More...</a><br /></td></tr>
<tr class="separator:ad6a46d89e9ab943f71fe7339ecabd103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad854983356b91581ad52fef5671d56bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#ad854983356b91581ad52fef5671d56bc">procserv_frame_write</a> (seL4_CPtr frame, <a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *src, size_t len, size_t offset)</td></tr>
<tr class="memdesc:ad854983356b91581ad52fef5671d56bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary map a page frame and write data to it.  <a href="process__server_2src_2state_8c.html#ad854983356b91581ad52fef5671d56bc">More...</a><br /></td></tr>
<tr class="separator:ad854983356b91581ad52fef5671d56bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46995051b2c2142eb20ac15fcd03135c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a46995051b2c2142eb20ac15fcd03135c">procserv_frame_read</a> (seL4_CPtr frame, <a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *dst, size_t len, size_t offset)</td></tr>
<tr class="memdesc:a46995051b2c2142eb20ac15fcd03135c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary map a page frame and read data from it.  <a href="process__server_2src_2state_8c.html#a46995051b2c2142eb20ac15fcd03135c">More...</a><br /></td></tr>
<tr class="separator:a46995051b2c2142eb20ac15fcd03135c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195a5e63c5396a4ac876f6994593da8e"><td class="memItemLeft" align="right" valign="top">cspacepath_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a195a5e63c5396a4ac876f6994593da8e">procserv_find_device</a> (void *paddr, int size)</td></tr>
<tr class="memdesc:a195a5e63c5396a4ac876f6994593da8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to finds a MMIO device frame.  <a href="process__server_2src_2state_8c.html#a195a5e63c5396a4ac876f6994593da8e">More...</a><br /></td></tr>
<tr class="separator:a195a5e63c5396a4ac876f6994593da8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9eac7bd7ba3dd602b56a537f99d989"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a9d9eac7bd7ba3dd602b56a537f99d989">procserv_flush</a> (seL4_CPtr *frame, int nFrames)</td></tr>
<tr class="memdesc:a9d9eac7bd7ba3dd602b56a537f99d989"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper Function to TLB flush on a series of frames.  <a href="process__server_2src_2state_8c.html#a9d9eac7bd7ba3dd602b56a537f99d989">More...</a><br /></td></tr>
<tr class="separator:a9d9eac7bd7ba3dd602b56a537f99d989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a48dbba5edbd9c39f4bb82e276cb31c"><td class="memItemLeft" align="right" valign="top">seL4_CPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a0a48dbba5edbd9c39f4bb82e276cb31c">procserv_get_irq_handler</a> (int irq)</td></tr>
<tr class="memdesc:a0a48dbba5edbd9c39f4bb82e276cb31c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to retrieve an IRQ handler for the given IRQ number. Uses a hash table in order to avoid creating the same IRQ handler twice.  <a href="process__server_2src_2state_8c.html#a0a48dbba5edbd9c39f4bb82e276cb31c">More...</a><br /></td></tr>
<tr class="separator:a0a48dbba5edbd9c39f4bb82e276cb31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af5a99ec7f3a4126a32e9c63d431e09cf"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#af5a99ec7f3a4126a32e9c63d431e09cf">serial_paddr</a></td></tr>
<tr class="separator:af5a99ec7f3a4126a32e9c63d431e09cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17fd75a8827b0d5bdcaed6c8e1681d23"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a17fd75a8827b0d5bdcaed6c8e1681d23">_procservInitialMemPool</a> [<a class="el" href="process__server_2src_2state_8c.html#aee4bca8963791ae0caffc01d61a32ae5">CONFIG_PROCSERV_INITIAL_MEM_SIZE</a>]</td></tr>
<tr class="separator:a17fd75a8827b0d5bdcaed6c8e1681d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bac968758f3f991aa0608581873a21"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structprocserv__state.html">procserv_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a99bac968758f3f991aa0608581873a21">procServ</a></td></tr>
<tr class="memdesc:a99bac968758f3f991aa0608581873a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process server global state.  <a href="process__server_2src_2state_8c.html#a99bac968758f3f991aa0608581873a21">More...</a><br /></td></tr>
<tr class="separator:a99bac968758f3f991aa0608581873a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28e5f0fc8bfb74718e0a43452728ecd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#aa28e5f0fc8bfb74718e0a43452728ecd">dprintfServerName</a> = &quot;PROCSERV&quot;</td></tr>
<tr class="separator:aa28e5f0fc8bfb74718e0a43452728ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b613d1862918d9ca334c86af989765"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process__server_2src_2state_8c.html#a56b613d1862918d9ca334c86af989765">dprintfServerColour</a> = 32</td></tr>
<tr class="separator:a56b613d1862918d9ca334c86af989765"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Global statuc struct &amp; helper functions for process server. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa3b3f1cd70a32e0b7b17464130a011ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b3f1cd70a32e0b7b17464130a011ab">&#9670;&nbsp;</a></span>ALLOCATOR_VIRTUAL_POOL_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALLOCATOR_VIRTUAL_POOL_SIZE&#160;&#160;&#160;((1 &lt;&lt; seL4_PageBits) * 100)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aee4bca8963791ae0caffc01d61a32ae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee4bca8963791ae0caffc01d61a32ae5">&#9670;&nbsp;</a></span>CONFIG_PROCSERV_INITIAL_MEM_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_PROCSERV_INITIAL_MEM_SIZE&#160;&#160;&#160;(4096 * 32)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a85c08bab931a4ea6d84cce631edfb1ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c08bab931a4ea6d84cce631edfb1ef">&#9670;&nbsp;</a></span>PROCSERV_IRQ_HANDLER_HASHTABLE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PROCSERV_IRQ_HANDLER_HASHTABLE_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a82ff8f676bc401776e2954942f01df8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82ff8f676bc401776e2954942f01df8d">&#9670;&nbsp;</a></span>faketime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t faketime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fake time, useful for debugging. </p>
<p>Fake time, useful for debugging. </p>

</div>
</div>
<a id="ad8901b56e6df143836279de099a9f703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8901b56e6df143836279de099a9f703">&#9670;&nbsp;</a></span>initialise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialise </td>
          <td>(</td>
          <td class="paramtype">seL4_BootInfo *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__state.html">procserv_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the process server. </p>
<p>Initialises the process server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>The BootInfo struct passed in from the kernel. </td></tr>
    <tr><td class="paramname">s</td><td>The process server global state to initialise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac7887a02bb51e0d6f4282771b296742a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7887a02bb51e0d6f4282771b296742a">&#9670;&nbsp;</a></span>initialise_allocator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void initialise_allocator </td>
          <td>(</td>
          <td class="paramtype">seL4_BootInfo *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__state.html">procserv_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises the kernel object allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>The BootInfo struct passed in from the kernel. </td></tr>
    <tr><td class="paramname">s</td><td>The process server global state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a702e4c445b00fbb4e8e84f86e4438bd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a702e4c445b00fbb4e8e84f86e4438bd7">&#9670;&nbsp;</a></span>initialise_modules()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void initialise_modules </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__state.html">procserv_state</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise the process server modules. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The process server global state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeeb4c9f23d6fa1af6f8da16d3aa7d899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeb4c9f23d6fa1af6f8da16d3aa7d899">&#9670;&nbsp;</a></span>initialise_welcome_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void initialise_welcome_message </td>
          <td>(</td>
          <td class="paramtype">seL4_BootInfo *&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>display a heartwarming welcome message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>The Bootinfo structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a195a5e63c5396a4ac876f6994593da8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a195a5e63c5396a4ac876f6994593da8e">&#9670;&nbsp;</a></span>procserv_find_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cspacepath_t procserv_find_device </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>paddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to finds a MMIO device frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">paddr</td><td>Physical address of the device MMIO frame. </td></tr>
    <tr><td class="paramname">size</td><td>Size of device frame in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Path to device frame on success (gives ownership to caller), 0 otherwise. </dd></dl>

</div>
</div>
<a id="a9d9eac7bd7ba3dd602b56a537f99d989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9eac7bd7ba3dd602b56a537f99d989">&#9670;&nbsp;</a></span>procserv_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void procserv_flush </td>
          <td>(</td>
          <td class="paramtype">seL4_CPtr *&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nFrames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper Function to TLB flush on a series of frames. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame</td><td>Pointer to array of frame caps to unmap. </td></tr>
    <tr><td class="paramname">nFrames</td><td>Number of frames in given frame array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a46995051b2c2142eb20ac15fcd03135c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46995051b2c2142eb20ac15fcd03135c">&#9670;&nbsp;</a></span>procserv_frame_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int procserv_frame_read </td>
          <td>(</td>
          <td class="paramtype">seL4_CPtr&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Temporary map a page frame and read data from it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame</td><td>CPtr to source frame. </td></tr>
    <tr><td class="paramname">dst</td><td>Data destination buffer. </td></tr>
    <tr><td class="paramname">len</td><td>Data destination buffer max length. </td></tr>
    <tr><td class="paramname">offset</td><td>Offset into frame to read from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS if read successful, refos error otherwise. </dd></dl>

</div>
</div>
<a id="ad854983356b91581ad52fef5671d56bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad854983356b91581ad52fef5671d56bc">&#9670;&nbsp;</a></span>procserv_frame_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int procserv_frame_write </td>
          <td>(</td>
          <td class="paramtype">seL4_CPtr&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Temporary map a page frame and write data to it. </p>
<p>In order to read / write data to / from a</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame</td><td>CPtr to destination frame. </td></tr>
    <tr><td class="paramname">src</td><td>Data source buffer. </td></tr>
    <tr><td class="paramname">len</td><td>Data source buffer length. </td></tr>
    <tr><td class="paramname">offset</td><td>Offset into frame to write to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS if write successful, refos error otherwise. </dd></dl>

</div>
</div>
<a id="a0a48dbba5edbd9c39f4bb82e276cb31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a48dbba5edbd9c39f4bb82e276cb31c">&#9670;&nbsp;</a></span>procserv_get_irq_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">seL4_CPtr procserv_get_irq_handler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to retrieve an IRQ handler for the given IRQ number. Uses a hash table in order to avoid creating the same IRQ handler twice. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">irq</td><td>The IRQ number to create the handler for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding IRQ handler cap if successful, 0 otherwise. </dd></dl>

</div>
</div>
<a id="ad6a46d89e9ab943f71fe7339ecabd103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6a46d89e9ab943f71fe7339ecabd103">&#9670;&nbsp;</a></span>procserv_mint_badge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cspacepath_t procserv_mint_badge </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>badge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a generic minted badge using the process server's EP. </p>
<p>Creates a generic minted badge using the process server's EP. Ownership is transferred, so the resulting capability must be revoked, deleted and the cslot freed by the caller. Permissions are set to canWrite | canGrant, as the resulting object badge should be passable and invokable but we don't really want anyone else listening in to that EP and pretending to be the process server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">badge</td><td>the badge number to create. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cslot to minted badge (ownership transfer). </dd></dl>

</div>
</div>
<a id="a0034b8e6e423ddf45b8288566d8adaf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0034b8e6e423ddf45b8288566d8adaf9">&#9670;&nbsp;</a></span>procserv_nameserv_callback_free_cap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void procserv_nameserv_callback_free_cap </td>
          <td>(</td>
          <td class="paramtype">seL4_CPtr&#160;</td>
          <td class="paramname"><em>cap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The free EP cap callback function, used by the nameserv implementation helper library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cap</td><td>The endpoint cap to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a17fd75a8827b0d5bdcaed6c8e1681d23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17fd75a8827b0d5bdcaed6c8e1681d23">&#9670;&nbsp;</a></span>_procservInitialMemPool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char _procservInitialMemPool[<a class="el" href="process__server_2src_2state_8c.html#aee4bca8963791ae0caffc01d61a32ae5">CONFIG_PROCSERV_INITIAL_MEM_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a56b613d1862918d9ca334c86af989765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b613d1862918d9ca334c86af989765">&#9670;&nbsp;</a></span>dprintfServerColour</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dprintfServerColour = 32</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa28e5f0fc8bfb74718e0a43452728ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa28e5f0fc8bfb74718e0a43452728ecd">&#9670;&nbsp;</a></span>dprintfServerName</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char* dprintfServerName = &quot;PROCSERV&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a99bac968758f3f991aa0608581873a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99bac968758f3f991aa0608581873a21">&#9670;&nbsp;</a></span>procServ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structprocserv__state.html">procserv_state</a> procServ</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process server global state. </p>

</div>
</div>
<a id="af5a99ec7f3a4126a32e9c63d431e09cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a99ec7f3a4126a32e9c63d431e09cf">&#9670;&nbsp;</a></span>serial_paddr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* serial_paddr</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_53aa6d20d2a83f4c89c1fd34dd1fa489.html">process_server</a></li><li class="navelem"><a class="el" href="dir_2020bcb30412175c6238bd50c5604389.html">src</a></li><li class="navelem"><a class="el" href="process__server_2src_2state_8c.html">state.c</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 10:14:23 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
