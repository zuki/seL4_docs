<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: apps/console_server/src/state.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('console__server_2src_2state_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">state.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Console Server global state &amp; helper functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;autoconf.h&gt;</code><br />
<code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="cspace_8h_source.html">refos-util/cspace.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="vmlayout_8h_source.html">refos/vmlayout.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="refos_8h_source.html">refos/refos.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="proc__client_8h_source.html">refos-rpc/proc_client.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="proc__client__helper_8h_source.html">refos-rpc/proc_client_helper.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="name__client_8h_source.html">refos-rpc/name_client.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="name__client__helper_8h_source.html">refos-rpc/name_client_helper.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="serv__common_8h_source.html">refos-util/serv_common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="device__irq_8h_source.html">refos-util/device_irq.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="console__server_2src_2state_8h_source.html">state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="console__server_2src_2badge_8h_source.html">badge.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afcc4daba69e799e0ecf7da093bf95b98"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#afcc4daba69e799e0ecf7da093bf95b98">conserv_writev_override</a> (void *data, size_t count)</td></tr>
<tr class="memdesc:afcc4daba69e799e0ecf7da093bf95b98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Console Server stdout writev override.  <a href="console__server_2src_2state_8c.html#afcc4daba69e799e0ecf7da093bf95b98">More...</a><br /></td></tr>
<tr class="separator:afcc4daba69e799e0ecf7da093bf95b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2187a5c093687c0a4b6b203818d269f8"><td class="memItemLeft" align="right" valign="top">static seL4_CPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#a2187a5c093687c0a4b6b203818d269f8">conserv_get_irq_handler_endpoint</a> (void *cookie, int irq)</td></tr>
<tr class="separator:a2187a5c093687c0a4b6b203818d269f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3d8dba7dc3a70fe16eb6360f9bceb03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#ae3d8dba7dc3a70fe16eb6360f9bceb03">conserv_init</a> (void)</td></tr>
<tr class="memdesc:ae3d8dba7dc3a70fe16eb6360f9bceb03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise Console server state.  <a href="console__server_2src_2state_8c.html#ae3d8dba7dc3a70fe16eb6360f9bceb03">More...</a><br /></td></tr>
<tr class="separator:ae3d8dba7dc3a70fe16eb6360f9bceb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6fb26dd537ba5d09f65bedd36a948f42"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconserv__state.html">conserv_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#a6fb26dd537ba5d09f65bedd36a948f42">conServ</a></td></tr>
<tr class="separator:a6fb26dd537ba5d09f65bedd36a948f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc7b9294e78fed69bdd11bd6c306080"><td class="memItemLeft" align="right" valign="top"><a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#aabc7b9294e78fed69bdd11bd6c306080">conServCommon</a></td></tr>
<tr class="separator:aabc7b9294e78fed69bdd11bd6c306080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28e5f0fc8bfb74718e0a43452728ecd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#aa28e5f0fc8bfb74718e0a43452728ecd">dprintfServerName</a> = &quot;CONSERV&quot;</td></tr>
<tr class="separator:aa28e5f0fc8bfb74718e0a43452728ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b613d1862918d9ca334c86af989765"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="console__server_2src_2state_8c.html#a56b613d1862918d9ca334c86af989765">dprintfServerColour</a> = 33</td></tr>
<tr class="separator:a56b613d1862918d9ca334c86af989765"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Console Server global state &amp; helper functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2187a5c093687c0a4b6b203818d269f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2187a5c093687c0a4b6b203818d269f8">&#9670;&nbsp;</a></span>conserv_get_irq_handler_endpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static seL4_CPtr conserv_get_irq_handler_endpoint </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cookie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>irq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae3d8dba7dc3a70fe16eb6360f9bceb03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3d8dba7dc3a70fe16eb6360f9bceb03">&#9670;&nbsp;</a></span>conserv_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void conserv_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise Console server state. </p>

</div>
</div>
<a id="afcc4daba69e799e0ecf7da093bf95b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcc4daba69e799e0ecf7da093bf95b98">&#9670;&nbsp;</a></span>conserv_writev_override()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t conserv_writev_override </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Console Server stdout writev override. </p>
<p>The console server needs to override stdout, because in the console server itself is the serial driver, and obviously cannot IPC itself for stdout. Instead, we override writev here to directly output to the serial driver. If EGA screen is detected to be enabled, we write to that as well.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The data buffer to write out to serial. </td></tr>
    <tr><td class="paramname">count</td><td>Num of characters in writev. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written. Always returns count. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6fb26dd537ba5d09f65bedd36a948f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fb26dd537ba5d09f65bedd36a948f42">&#9670;&nbsp;</a></span>conServ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconserv__state.html">conserv_state</a> conServ</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aabc7b9294e78fed69bdd11bd6c306080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabc7b9294e78fed69bdd11bd6c306080">&#9670;&nbsp;</a></span>conServCommon</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a>* conServCommon</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a56b613d1862918d9ca334c86af989765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b613d1862918d9ca334c86af989765">&#9670;&nbsp;</a></span>dprintfServerColour</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dprintfServerColour = 33</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa28e5f0fc8bfb74718e0a43452728ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa28e5f0fc8bfb74718e0a43452728ecd">&#9670;&nbsp;</a></span>dprintfServerName</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char* dprintfServerName = &quot;CONSERV&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_52ca6691134020d7990716e855f9e6e4.html">console_server</a></li><li class="navelem"><a class="el" href="dir_9fc4745385e894d605070f1ace990cff.html">src</a></li><li class="navelem"><a class="el" href="console__server_2src_2state_8c.html">state.c</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 10:14:23 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
