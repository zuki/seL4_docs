<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: apps/process_server/src/dispatchers/fault_handler.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fault__handler_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fault_handler.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Process server fault dispatcher which handles VM faults.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;sel4/sel4.h&gt;</code><br />
<code>#include &lt;sel4/messages.h&gt;</code><br />
<code>#include &lt;sel4utils/arch/util.h&gt;</code><br />
<code>#include &lt;<a class="el" href="proc__common_8h_source.html">refos-rpc/proc_common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="error_8h_source.html">refos/error.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="fault__handler_8h_source.html">fault_handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dispatcher_8h_source.html">dispatcher.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="process__server_2src_2state_8h_source.html">../state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="process__server_2src_2badge_8h_source.html">../badge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vspace_8h_source.html">../system/addrspace/vspace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="process_8h_source.html">../system/process/process.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="refos_8h_source.html">refos/refos.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Temporary internal VM fault message info struct.  <a href="structprocserv__vmfault__msg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acec93c3175e575c4b1bdf10568bc0e99"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#acec93c3175e575c4b1bdf10568bc0e99">output_segmentation_fault</a> (<a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *message, struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *f)</td></tr>
<tr class="memdesc:acec93c3175e575c4b1bdf10568bc0e99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to print a rather colourful and verbose segmentation fault message.  <a href="fault__handler_8c.html#acec93c3175e575c4b1bdf10568bc0e99">More...</a><br /></td></tr>
<tr class="separator:acec93c3175e575c4b1bdf10568bc0e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa44dfe4138d8fe8d1bdeea7dedd68d03"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#aa44dfe4138d8fe8d1bdeea7dedd68d03">fault_delegate_notification</a> (struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *f, struct <a class="el" href="structproc__pcb.html">proc_pcb</a> *delegationPCB, cspacepath_t delegationEP, struct <a class="el" href="structproc__notification.html">proc_notification</a> vmFaultNotification, bool saveReply)</td></tr>
<tr class="memdesc:aa44dfe4138d8fe8d1bdeea7dedd68d03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to delegate fault message to an external endpoint.  <a href="fault__handler_8c.html#aa44dfe4138d8fe8d1bdeea7dedd68d03">More...</a><br /></td></tr>
<tr class="separator:aa44dfe4138d8fe8d1bdeea7dedd68d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a677804ba1b8949a9ad3f79ea175a8d33"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#a677804ba1b8949a9ad3f79ea175a8d33">handle_vm_fault_dspace</a> (struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *<a class="el" href="muse_8c.html#a2be9fd1bd420b11f443b4b54d13f2b4d">m</a>, struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *f, struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *aw, struct <a class="el" href="structw__window.html">w_window</a> *window)</td></tr>
<tr class="memdesc:a677804ba1b8949a9ad3f79ea175a8d33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles faults on windows mapped to anonymous memory.  <a href="fault__handler_8c.html#a677804ba1b8949a9ad3f79ea175a8d33">More...</a><br /></td></tr>
<tr class="separator:a677804ba1b8949a9ad3f79ea175a8d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92be5adda33b12e118ac49dbd1c8d4c1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#a92be5adda33b12e118ac49dbd1c8d4c1">handle_vm_fault_pager</a> (struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *<a class="el" href="muse_8c.html#a2be9fd1bd420b11f443b4b54d13f2b4d">m</a>, struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *f, struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *aw, struct <a class="el" href="structw__window.html">w_window</a> *window)</td></tr>
<tr class="memdesc:a92be5adda33b12e118ac49dbd1c8d4c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles faults on windows set to external pager.  <a href="fault__handler_8c.html#a92be5adda33b12e118ac49dbd1c8d4c1">More...</a><br /></td></tr>
<tr class="separator:a92be5adda33b12e118ac49dbd1c8d4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac72d05851cb1417ff3023834a79f7e75"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#ac72d05851cb1417ff3023834a79f7e75">handle_vm_fault</a> (struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *<a class="el" href="muse_8c.html#a2be9fd1bd420b11f443b4b54d13f2b4d">m</a>, struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *f)</td></tr>
<tr class="memdesc:ac72d05851cb1417ff3023834a79f7e75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles client VM fault messages sent by the kernel.  <a href="fault__handler_8c.html#ac72d05851cb1417ff3023834a79f7e75">More...</a><br /></td></tr>
<tr class="separator:ac72d05851cb1417ff3023834a79f7e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d1ac2dc19dd6b7978368c4870b767d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#a1d1ac2dc19dd6b7978368c4870b767d6">check_dispatch_fault</a> (struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *<a class="el" href="muse_8c.html#a2be9fd1bd420b11f443b4b54d13f2b4d">m</a>, void **userptr)</td></tr>
<tr class="memdesc:a1d1ac2dc19dd6b7978368c4870b767d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the given recieved message is a VM fault message.  <a href="fault__handler_8c.html#a1d1ac2dc19dd6b7978368c4870b767d6">More...</a><br /></td></tr>
<tr class="separator:a1d1ac2dc19dd6b7978368c4870b767d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08b4e27e306d8578755db7b50e60e325"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fault__handler_8c.html#a08b4e27e306d8578755db7b50e60e325">dispatch_vm_fault</a> (struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *<a class="el" href="muse_8c.html#a2be9fd1bd420b11f443b4b54d13f2b4d">m</a>, void **userptr)</td></tr>
<tr class="memdesc:a08b4e27e306d8578755db7b50e60e325"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dispatcher for client VM faults.  <a href="fault__handler_8c.html#a08b4e27e306d8578755db7b50e60e325">More...</a><br /></td></tr>
<tr class="separator:a08b4e27e306d8578755db7b50e60e325"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Process server fault dispatcher which handles VM faults. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1d1ac2dc19dd6b7978368c4870b767d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d1ac2dc19dd6b7978368c4870b767d6">&#9670;&nbsp;</a></span>check_dispatch_fault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_dispatch_fault </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>userptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the given recieved message is a VM fault message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Struct containing info about the recieved message. </td></tr>
    <tr><td class="paramname">userptr</td><td>Output user pointer. Pass this into the generated dispatcher function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DISPATCH_SUCCESS if message is a VM fault syscall, DISPATCH_PASS otherwise. </dd></dl>

</div>
</div>
<a id="a08b4e27e306d8578755db7b50e60e325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08b4e27e306d8578755db7b50e60e325">&#9670;&nbsp;</a></span>dispatch_vm_fault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dispatch_vm_fault </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>userptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dispatcher for client VM faults. </p>

</div>
</div>
<a id="aa44dfe4138d8fe8d1bdeea7dedd68d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa44dfe4138d8fe8d1bdeea7dedd68d03">&#9670;&nbsp;</a></span>fault_delegate_notification()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fault_delegate_notification </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structproc__pcb.html">proc_pcb</a> *&#160;</td>
          <td class="paramname"><em>delegationPCB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cspacepath_t&#160;</td>
          <td class="paramname"><em>delegationEP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structproc__notification.html">proc_notification</a>&#160;</td>
          <td class="paramname"><em>vmFaultNotification</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>saveReply</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to delegate fault message to an external endpoint. </p>
<p>Writes the given message to the delegator's notification ring buffer, and then sends an async notification along the EP the delegator has set up previously. This helper function is used for every kind of notification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>The fault message info structure. </td></tr>
    <tr><td class="paramname">delegationPCB</td><td>The PCB structure of the delegator recieving the notification. </td></tr>
    <tr><td class="paramname">delegationEP</td><td>The async endpoint of delegator to notify. </td></tr>
    <tr><td class="paramname">vmFaultNotification</td><td>The VM fault noficfiation message contents. </td></tr>
    <tr><td class="paramname">saveReply</td><td>Whether to save the falunt client's reply EP. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac72d05851cb1417ff3023834a79f7e75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac72d05851cb1417ff3023834a79f7e75">&#9670;&nbsp;</a></span>handle_vm_fault()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_vm_fault </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles client VM fault messages sent by the kernel. </p>
<p>Handles the VM fault message by looking up the details of the window that it faulted in, and decides whether this fault should be delegated to an external dataspace server for paging or content initalisation, or be handled internally by the process server's own dataspace implementation for RAM, or is an invalid memory access.</p>
<p>In the case of an invalid memory access, or if the process server runs out of RAM, then the fault is unable to be handled and the faulting process is blocked indefinitely.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The recieved IPC fault message from the kernel. </td></tr>
    <tr><td class="paramname">f</td><td>The VM fault message info struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a677804ba1b8949a9ad3f79ea175a8d33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a677804ba1b8949a9ad3f79ea175a8d33">&#9670;&nbsp;</a></span>handle_vm_fault_dspace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_vm_fault_dspace </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td>
          <td class="paramname"><em>window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles faults on windows mapped to anonymous memory. </p>
<p>This function is responsible for handling VM faults on windows which have been mapped to the process server's own anonymous dataspaces, including ones that have been content-initialised.</p>
<p>If the dataspace has been set to content-initialised, then we will need to delegate and save the reply cap to reply to it once the content has been initialised. If it has not been initialised we simply map the dataspace page and reply.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The recieved IPC fault message from the kernel. </td></tr>
    <tr><td class="paramname">f</td><td>The VM fault message info struct. </td></tr>
    <tr><td class="paramname">aw</td><td>Found associated window of the faulting address &amp; client. </td></tr>
    <tr><td class="paramname">window</td><td>The window structure of the faulting address &amp; client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS on success, refos_err_t otherwise. </dd></dl>

</div>
</div>
<a id="a92be5adda33b12e118ac49dbd1c8d4c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92be5adda33b12e118ac49dbd1c8d4c1">&#9670;&nbsp;</a></span>handle_vm_fault_pager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handle_vm_fault_pager </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td>
          <td class="paramname"><em>window</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles faults on windows set to external pager. </p>
<p>This functions handles the VM faults which results in a window that has been set up to be in external paged mode. we simply delegate to the external pager and they'll call data_datamap back on us and take are of the rest.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The recieved IPC fault message from the kernel. </td></tr>
    <tr><td class="paramname">f</td><td>The VM fault message info struct. </td></tr>
    <tr><td class="paramname">aw</td><td>Found associated window of the faulting address &amp; client. </td></tr>
    <tr><td class="paramname">window</td><td>The window structure of the faulting address &amp; client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS on success, refos_err_t otherwise. </dd></dl>

</div>
</div>
<a id="acec93c3175e575c4b1bdf10568bc0e99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acec93c3175e575c4b1bdf10568bc0e99">&#9670;&nbsp;</a></span>output_segmentation_fault()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void output_segmentation_fault </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tradstdc_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__vmfault__msg.html">procserv_vmfault_msg</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to print a rather colourful and verbose segmentation fault message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>Text message containing fault reason. </td></tr>
    <tr><td class="paramname">f</td><td>The fault message info structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_53aa6d20d2a83f4c89c1fd34dd1fa489.html">process_server</a></li><li class="navelem"><a class="el" href="dir_2020bcb30412175c6238bd50c5604389.html">src</a></li><li class="navelem"><a class="el" href="dir_0f69ba8e32cdd82dc40e4859203a0fff.html">dispatchers</a></li><li class="navelem"><a class="el" href="fault__handler_8c.html">fault_handler.c</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 17:16:02 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
