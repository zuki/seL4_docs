<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: apps/process_server/src/system/memserv/window.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('window_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">window.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Manages and keeps track of memory windows.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;sel4/sel4.h&gt;</code><br />
<code>#include &lt;<a class="el" href="cvector_8h_source.html">data_struct/cvector.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="coat_8h_source.html">data_struct/coat.h</a>&gt;</code><br />
<code>#include &lt;vspace/vspace.h&gt;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">../../common.h</a>&quot;</code><br />
</div>
<p><a href="window_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structw__window.html">w_window</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory window structure.  <a href="structw__window.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structw__list.html">w_list</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Window list.  <a href="structw__list.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structw__associated__window.html">w_associated_window</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Window association entry.  <a href="structw__associated__window.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Window association list.  <a href="structw__associated__windowlist.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a92fa6b57693aa47fab7dac606b6a5633"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a92fa6b57693aa47fab7dac606b6a5633">W_INVALID_WINID</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a92fa6b57693aa47fab7dac606b6a5633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d80aaa2b7aa599f8007a3478f738e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a11d80aaa2b7aa599f8007a3478f738e6">W_MAGIC</a>&#160;&#160;&#160;0x02B16401</td></tr>
<tr class="separator:a11d80aaa2b7aa599f8007a3478f738e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc401ce94480808399f9d8459f53aa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a4bc401ce94480808399f9d8459f53aa2">W_LIST_MAGIC</a>&#160;&#160;&#160;0x63CA5250</td></tr>
<tr class="separator:a4bc401ce94480808399f9d8459f53aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5fafd257ac9b6ae52bc1dc18c5deb2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#afe5fafd257ac9b6ae52bc1dc18c5deb2">W_PERMISSION_WRITE</a>&#160;&#160;&#160;0x1</td></tr>
<tr class="separator:afe5fafd257ac9b6ae52bc1dc18c5deb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb4959c354614d97295ec6adf7a77a74"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#afb4959c354614d97295ec6adf7a77a74">W_PERMISSION_READ</a>&#160;&#160;&#160;0x2</td></tr>
<tr class="separator:afb4959c354614d97295ec6adf7a77a74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee73f7903cea967e40dbc492ca73a609"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#aee73f7903cea967e40dbc492ca73a609">W_FLAGS_UNCACHED</a>&#160;&#160;&#160;0x1</td></tr>
<tr class="separator:aee73f7903cea967e40dbc492ca73a609"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a1eac2ab0ed0d6e4d9f9a69d10e3c382d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a1eac2ab0ed0d6e4d9f9a69d10e3c382d">w_window_mode</a> { <a class="el" href="window_8h.html#a1eac2ab0ed0d6e4d9f9a69d10e3c382da7d24c4e53eeda6f034175675156da70d">W_MODE_EMPTY</a> = 0
, <a class="el" href="window_8h.html#a1eac2ab0ed0d6e4d9f9a69d10e3c382da35ebcc0348a5193be1c4d6861c278b76">W_MODE_ANONYMOUS</a>
, <a class="el" href="window_8h.html#a1eac2ab0ed0d6e4d9f9a69d10e3c382da8d89c65f1c3ad8a47380a601a6eea27c">W_MODE_PAGER</a>
 }</td></tr>
<tr class="memdesc:a1eac2ab0ed0d6e4d9f9a69d10e3c382d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Memory window operation mode. A window may be backed by nothing, by a process server dataspace, or by an external fileserver dataspace.  <a href="window_8h.html#a1eac2ab0ed0d6e4d9f9a69d10e3c382d">More...</a><br /></td></tr>
<tr class="separator:a1eac2ab0ed0d6e4d9f9a69d10e3c382d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9f172d5df3de973b07118b3465794595"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a9f172d5df3de973b07118b3465794595">vs_unmap_window</a> (struct <a class="el" href="structvs__vspace.html">vs_vspace</a> *vs, int wID)</td></tr>
<tr class="memdesc:a9f172d5df3de973b07118b3465794595"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmap the frames covered by given window, in a vspace.  <a href="window_8h.html#a9f172d5df3de973b07118b3465794595">More...</a><br /></td></tr>
<tr class="separator:a9f172d5df3de973b07118b3465794595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d15297323142839025be813db1b963"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a50d15297323142839025be813db1b963">w_init</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist)</td></tr>
<tr class="memdesc:a50d15297323142839025be813db1b963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the window list.  <a href="window_8h.html#a50d15297323142839025be813db1b963">More...</a><br /></td></tr>
<tr class="separator:a50d15297323142839025be813db1b963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96174bffd435d136747a6d31458cf068"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a96174bffd435d136747a6d31458cf068">w_deinit</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist)</td></tr>
<tr class="memdesc:a96174bffd435d136747a6d31458cf068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitialises the window list, and release all windows in it.  <a href="window_8h.html#a96174bffd435d136747a6d31458cf068">More...</a><br /></td></tr>
<tr class="separator:a96174bffd435d136747a6d31458cf068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ed8d320e73452d9dc0cd447a8d08c0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a98ed8d320e73452d9dc0cd447a8d08c0">w_create_window</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> size, int ownerPID, seL4_Word permissions, vspace_t *vspace, reservation_t reservation, bool cacheable)</td></tr>
<tr class="memdesc:a98ed8d320e73452d9dc0cd447a8d08c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new window.  <a href="window_8h.html#a98ed8d320e73452d9dc0cd447a8d08c0">More...</a><br /></td></tr>
<tr class="separator:a98ed8d320e73452d9dc0cd447a8d08c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5a79fdae23d3ad0a6e3bc576b85f29f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#aa5a79fdae23d3ad0a6e3bc576b85f29f">w_delete_window</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist, int windowID)</td></tr>
<tr class="memdesc:aa5a79fdae23d3ad0a6e3bc576b85f29f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a window at given index from list, along with any stored caps.  <a href="window_8h.html#aa5a79fdae23d3ad0a6e3bc576b85f29f">More...</a><br /></td></tr>
<tr class="separator:aa5a79fdae23d3ad0a6e3bc576b85f29f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa3b1959562f54bef8b78468b41984f5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#aaa3b1959562f54bef8b78468b41984f5">w_get_window</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist, int windowID)</td></tr>
<tr class="memdesc:aaa3b1959562f54bef8b78468b41984f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the window structure associated with given windowID.  <a href="window_8h.html#aaa3b1959562f54bef8b78468b41984f5">More...</a><br /></td></tr>
<tr class="separator:aaa3b1959562f54bef8b78468b41984f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e703253e37a1df0d11bc667ede9a2e"><td class="memItemLeft" align="right" valign="top">static seL4_CapRights&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a88e703253e37a1df0d11bc667ede9a2e">w_convert_permission_to_caprights</a> (seL4_Word permission)</td></tr>
<tr class="memdesc:a88e703253e37a1df0d11bc667ede9a2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to convert window permission to seL4 capRights.  <a href="window_8h.html#a88e703253e37a1df0d11bc667ede9a2e">More...</a><br /></td></tr>
<tr class="separator:a88e703253e37a1df0d11bc667ede9a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3dad141a48a124c797976f54bbd63f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#ae3dad141a48a124c797976f54bbd63f3">w_set_pager_endpoint</a> (struct <a class="el" href="structw__window.html">w_window</a> *window, cspacepath_t endpoint, uint32_t pid)</td></tr>
<tr class="memdesc:ae3dad141a48a124c797976f54bbd63f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the window up to be paged by an external pager. Potentially does VSpace unmapping operations.  <a href="window_8h.html#ae3dad141a48a124c797976f54bbd63f3">More...</a><br /></td></tr>
<tr class="separator:ae3dad141a48a124c797976f54bbd63f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d3dc3777891e424ea14bd4f8eee1ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a54d3dc3777891e424ea14bd4f8eee1ca">w_set_anon_dspace</a> (struct <a class="el" href="structw__window.html">w_window</a> *window, struct <a class="el" href="structram__dspace.html">ram_dspace</a> *dspace, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> offset)</td></tr>
<tr class="memdesc:a54d3dc3777891e424ea14bd4f8eee1ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an internal RAM dataspace as the window's source of data. Potentially does VSpace unmapping operations.  <a href="window_8h.html#a54d3dc3777891e424ea14bd4f8eee1ca">More...</a><br /></td></tr>
<tr class="separator:a54d3dc3777891e424ea14bd4f8eee1ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44aa78fe0968102f33ab66d782bc648c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a44aa78fe0968102f33ab66d782bc648c">w_purge_dspace</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist, struct <a class="el" href="structram__dspace.html">ram_dspace</a> *dspace)</td></tr>
<tr class="memdesc:a44aa78fe0968102f33ab66d782bc648c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify of the window list of the death of a dataspace.  <a href="window_8h.html#a44aa78fe0968102f33ab66d782bc648c">More...</a><br /></td></tr>
<tr class="separator:a44aa78fe0968102f33ab66d782bc648c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd50c96ecc3caca92238b48aa1a05b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a9dd50c96ecc3caca92238b48aa1a05b5">w_resize_window</a> (struct <a class="el" href="structw__window.html">w_window</a> *window, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> vaddr, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> size)</td></tr>
<tr class="memdesc:a9dd50c96ecc3caca92238b48aa1a05b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resize a window. Note that this does not perform any window associate updates or checks, nor any vspace operations, simply updates the field in the global window list entry, and re-reserves the owned reservation.  <a href="window_8h.html#a9dd50c96ecc3caca92238b48aa1a05b5">More...</a><br /></td></tr>
<tr class="separator:a9dd50c96ecc3caca92238b48aa1a05b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a68467181e0d5503e2c67ce4790a1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a84a68467181e0d5503e2c67ce4790a1a">w_associate_init</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw)</td></tr>
<tr class="memdesc:a84a68467181e0d5503e2c67ce4790a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises window association list. Same as w_associate_clear.  <a href="window_8h.html#a84a68467181e0d5503e2c67ce4790a1a">More...</a><br /></td></tr>
<tr class="separator:a84a68467181e0d5503e2c67ce4790a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb57a5144bc5538647769cfebe455ede"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#aeb57a5144bc5538647769cfebe455ede">w_associate</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw, int winID, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> offset, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> size)</td></tr>
<tr class="memdesc:aeb57a5144bc5538647769cfebe455ede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new window association.  <a href="window_8h.html#aeb57a5144bc5538647769cfebe455ede">More...</a><br /></td></tr>
<tr class="separator:aeb57a5144bc5538647769cfebe455ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a482251078779dd45c0a75a1246ea1a30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a482251078779dd45c0a75a1246ea1a30">w_associate_print</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw)</td></tr>
<tr class="memdesc:a482251078779dd45c0a75a1246ea1a30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the window association list.  <a href="window_8h.html#a482251078779dd45c0a75a1246ea1a30">More...</a><br /></td></tr>
<tr class="separator:a482251078779dd45c0a75a1246ea1a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefa613ff5c54a2e8f830adebb618de12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#aefa613ff5c54a2e8f830adebb618de12">w_unassociate</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw, int winID)</td></tr>
<tr class="memdesc:aefa613ff5c54a2e8f830adebb618de12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unassociate a window from a process.  <a href="window_8h.html#aefa613ff5c54a2e8f830adebb618de12">More...</a><br /></td></tr>
<tr class="separator:aefa613ff5c54a2e8f830adebb618de12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529724df3db8610ee0b9c46e6eaa5a04"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a529724df3db8610ee0b9c46e6eaa5a04">w_associate_clear</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw)</td></tr>
<tr class="memdesc:a529724df3db8610ee0b9c46e6eaa5a04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears window association list.  <a href="window_8h.html#a529724df3db8610ee0b9c46e6eaa5a04">More...</a><br /></td></tr>
<tr class="separator:a529724df3db8610ee0b9c46e6eaa5a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2050343c219c0eb8bff406d5d942b31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#ac2050343c219c0eb8bff406d5d942b31">w_associate_release_associated_all_windows</a> (struct <a class="el" href="structw__list.html">w_list</a> *wlist, struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw)</td></tr>
<tr class="memdesc:ac2050343c219c0eb8bff406d5d942b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears window association list, and releases any associated windows from the global window list. This will not only unassociate all the associated windows, but will actually delete them too. Note that calling this function transfers ownership of <em>all</em> the winIDs in the given association list. So please double check window object ownership before calling this, to avoid double free-ing of windows.  <a href="window_8h.html#ac2050343c219c0eb8bff406d5d942b31">More...</a><br /></td></tr>
<tr class="separator:ac2050343c219c0eb8bff406d5d942b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a272cd8dfd92ea55a75607277a1a94f41"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a272cd8dfd92ea55a75607277a1a94f41">w_associate_find</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> addr)</td></tr>
<tr class="memdesc:a272cd8dfd92ea55a75607277a1a94f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a window from a window association list using base address of the window.  <a href="window_8h.html#a272cd8dfd92ea55a75607277a1a94f41">More...</a><br /></td></tr>
<tr class="separator:a272cd8dfd92ea55a75607277a1a94f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e4cf24b965635822269e8c6bef3a56"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a03e4cf24b965635822269e8c6bef3a56">w_associate_find_winID</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw, int winID)</td></tr>
<tr class="memdesc:a03e4cf24b965635822269e8c6bef3a56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a window from a window association list using window ID of the window.  <a href="window_8h.html#a03e4cf24b965635822269e8c6bef3a56">More...</a><br /></td></tr>
<tr class="separator:a03e4cf24b965635822269e8c6bef3a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a479942059827cf35872334b309a09ec2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a479942059827cf35872334b309a09ec2">w_associate_check</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> offset, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> size)</td></tr>
<tr class="memdesc:a479942059827cf35872334b309a09ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a window can be added to the window association list of a process.  <a href="window_8h.html#a479942059827cf35872334b309a09ec2">More...</a><br /></td></tr>
<tr class="separator:a479942059827cf35872334b309a09ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867baf2e6c317b4e7fd2f1b94797ac29"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structw__associated__window.html">w_associated_window</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="window_8h.html#a867baf2e6c317b4e7fd2f1b94797ac29">w_associate_find_range</a> (struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *aw, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> offset, <a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a> size)</td></tr>
<tr class="memdesc:a867baf2e6c317b4e7fd2f1b94797ac29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a window that entirely contains the given range.  <a href="window_8h.html#a867baf2e6c317b4e7fd2f1b94797ac29">More...</a><br /></td></tr>
<tr class="separator:a867baf2e6c317b4e7fd2f1b94797ac29"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages and keeps track of memory windows. </p>
<div class="image">
<img src="memwindow.png" alt=""/>
</div>
<p>In RefOS, memory segment windows (just called windows for short), are virtual address <a href="http://en.wikipedia.org/wiki/Memory_segmentation">memory segments</a> which belong in clients' vspaces. Each window keeps track of its read / write permissions, cachability, mapped contents, and any other state about the memory segment, and are represented by badged procserv endpoint capabilities. A window represents the permission to handle and map memory into a segment of a client's virtual address space.</p>
<p>This module manages and keeps track of client memory window segments and their associations. Used to implement the memory window segment interface. Each window is assigned a unique windowID, dynamically allocated.</p>
<p>Note that when operating on client memory windows, the higher-level vs_* window functions in &lt;<a class="el" href="vspace_8h.html" title="Client address space objects.">addrspace/vspace.h</a>&gt; should be used instead of the functions here. This module simply provides the low-level management functions for global window lists and window associations, does not provide any vspace functionality underneath. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aee73f7903cea967e40dbc492ca73a609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee73f7903cea967e40dbc492ca73a609">&#9670;&nbsp;</a></span>W_FLAGS_UNCACHED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_FLAGS_UNCACHED&#160;&#160;&#160;0x1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a92fa6b57693aa47fab7dac606b6a5633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92fa6b57693aa47fab7dac606b6a5633">&#9670;&nbsp;</a></span>W_INVALID_WINID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_INVALID_WINID&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4bc401ce94480808399f9d8459f53aa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bc401ce94480808399f9d8459f53aa2">&#9670;&nbsp;</a></span>W_LIST_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_LIST_MAGIC&#160;&#160;&#160;0x63CA5250</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a11d80aaa2b7aa599f8007a3478f738e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d80aaa2b7aa599f8007a3478f738e6">&#9670;&nbsp;</a></span>W_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_MAGIC&#160;&#160;&#160;0x02B16401</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afb4959c354614d97295ec6adf7a77a74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb4959c354614d97295ec6adf7a77a74">&#9670;&nbsp;</a></span>W_PERMISSION_READ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_PERMISSION_READ&#160;&#160;&#160;0x2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afe5fafd257ac9b6ae52bc1dc18c5deb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5fafd257ac9b6ae52bc1dc18c5deb2">&#9670;&nbsp;</a></span>W_PERMISSION_WRITE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define W_PERMISSION_WRITE&#160;&#160;&#160;0x1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a1eac2ab0ed0d6e4d9f9a69d10e3c382d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eac2ab0ed0d6e4d9f9a69d10e3c382d">&#9670;&nbsp;</a></span>w_window_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="window_8h.html#a1eac2ab0ed0d6e4d9f9a69d10e3c382d">w_window_mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Memory window operation mode. A window may be backed by nothing, by a process server dataspace, or by an external fileserver dataspace. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a1eac2ab0ed0d6e4d9f9a69d10e3c382da7d24c4e53eeda6f034175675156da70d"></a>W_MODE_EMPTY&#160;</td><td class="fielddoc"><p>The window is currently unmapped. Accessing it will result in segfault. </p>
</td></tr>
<tr><td class="fieldname"><a id="a1eac2ab0ed0d6e4d9f9a69d10e3c382da35ebcc0348a5193be1c4d6861c278b76"></a>W_MODE_ANONYMOUS&#160;</td><td class="fielddoc"><p>The window is mapped to a procserv anonymous memory dataspace. </p>
</td></tr>
<tr><td class="fieldname"><a id="a1eac2ab0ed0d6e4d9f9a69d10e3c382da8d89c65f1c3ad8a47380a601a6eea27c"></a>W_MODE_PAGER&#160;</td><td class="fielddoc"><p>The window is mapped to an external pager. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9f172d5df3de973b07118b3465794595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f172d5df3de973b07118b3465794595">&#9670;&nbsp;</a></span>vs_unmap_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vs_unmap_window </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvs__vspace.html">vs_vspace</a> *&#160;</td>
          <td class="paramname"><em>vs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unmap the frames covered by given window, in a vspace. </p>
<p>Unmap the frames covered by given window, in a vspace. Note that this does not do anything to the actual window (doesn't unassociate the window nor deletes the window). It merely unmaps the frames under it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vs</td><td>The vspace to unmap window from. </td></tr>
    <tr><td class="paramname">wID</td><td>The windowID of the window to unmap frames under. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb57a5144bc5538647769cfebe455ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb57a5144bc5538647769cfebe455ede">&#9670;&nbsp;</a></span>w_associate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int w_associate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>winID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new window association. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
    <tr><td class="paramname">winID</td><td>The window ID of the window to be associated. (No ownership transfer). </td></tr>
    <tr><td class="paramname">offset</td><td>The base address of the window in the address space of the process. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the window. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS if success, refos_error otherwise. </dd></dl>

</div>
</div>
<a id="a479942059827cf35872334b309a09ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a479942059827cf35872334b309a09ec2">&#9670;&nbsp;</a></span>w_associate_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool w_associate_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a window can be added to the window association list of a process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
    <tr><td class="paramname">offset</td><td>The base address of the window to be checked. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the window to be checked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if window can be added, FALSE window conflicts. </dd></dl>

</div>
</div>
<a id="a529724df3db8610ee0b9c46e6eaa5a04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a529724df3db8610ee0b9c46e6eaa5a04">&#9670;&nbsp;</a></span>w_associate_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_associate_clear </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears window association list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process to be cleared. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a272cd8dfd92ea55a75607277a1a94f41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a272cd8dfd92ea55a75607277a1a94f41">&#9670;&nbsp;</a></span>w_associate_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structw__associated__window.html">w_associated_window</a>* w_associate_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds a window from a window association list using base address of the window. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
    <tr><td class="paramname">addr</td><td>The base address of the target window. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer of the window association entry of the target window if found, NULL otherwise. </dd></dl>

</div>
</div>
<a id="a867baf2e6c317b4e7fd2f1b94797ac29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a867baf2e6c317b4e7fd2f1b94797ac29">&#9670;&nbsp;</a></span>w_associate_find_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structw__associated__window.html">w_associated_window</a>* w_associate_find_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds a window that entirely contains the given range. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
    <tr><td class="paramname">offset</td><td>The base address of the range to look for. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the range to look for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer of the window association entry if found, NULL otherwise. </dd></dl>

</div>
</div>
<a id="a03e4cf24b965635822269e8c6bef3a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e4cf24b965635822269e8c6bef3a56">&#9670;&nbsp;</a></span>w_associate_find_winID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structw__associated__window.html">w_associated_window</a>* w_associate_find_winID </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>winID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds a window from a window association list using window ID of the window. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
    <tr><td class="paramname">winID</td><td>The window ID of the target window. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer of the window association entry of the target window if found, NULL otherwise. </dd></dl>

</div>
</div>
<a id="a84a68467181e0d5503e2c67ce4790a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a68467181e0d5503e2c67ce4790a1a">&#9670;&nbsp;</a></span>w_associate_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_associate_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises window association list. Same as w_associate_clear. </p>

</div>
</div>
<a id="a482251078779dd45c0a75a1246ea1a30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a482251078779dd45c0a75a1246ea1a30">&#9670;&nbsp;</a></span>w_associate_print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_associate_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the window association list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac2050343c219c0eb8bff406d5d942b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2050343c219c0eb8bff406d5d942b31">&#9670;&nbsp;</a></span>w_associate_release_associated_all_windows()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_associate_release_associated_all_windows </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears window association list, and releases any associated windows from the global window list. This will not only unassociate all the associated windows, but will actually delete them too. Note that calling this function transfers ownership of <em>all</em> the winIDs in the given association list. So please double check window object ownership before calling this, to avoid double free-ing of windows. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to delete from. </td></tr>
    <tr><td class="paramname">aw</td><td>The window association list to delete windows from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a88e703253e37a1df0d11bc667ede9a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e703253e37a1df0d11bc667ede9a2e">&#9670;&nbsp;</a></span>w_convert_permission_to_caprights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static seL4_CapRights w_convert_permission_to_caprights </td>
          <td>(</td>
          <td class="paramtype">seL4_Word&#160;</td>
          <td class="paramname"><em>permission</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to convert window permission to seL4 capRights. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">permission</td><td>Window permission bitmask. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>corresponding seL4_CapRights to given window permission bitmask. </dd></dl>

</div>
</div>
<a id="a98ed8d320e73452d9dc0cd447a8d08c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98ed8d320e73452d9dc0cd447a8d08c0">&#9670;&nbsp;</a></span>w_create_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structw__window.html">w_window</a>* w_create_window </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ownerPID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">seL4_Word&#160;</td>
          <td class="paramname"><em>permissions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vspace_t *&#160;</td>
          <td class="paramname"><em>vspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reservation_t&#160;</td>
          <td class="paramname"><em>reservation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cacheable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new window. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to allocate window from. </td></tr>
    <tr><td class="paramname">size</td><td>The window size in bytes. </td></tr>
    <tr><td class="paramname">ownerPID</td><td>The owner client's PID (who's address space is this window in?). </td></tr>
    <tr><td class="paramname">permissions</td><td>The window permissions. </td></tr>
    <tr><td class="paramname">vspace</td><td>The vspace corresponding to the reservation. </td></tr>
    <tr><td class="paramname">reservation</td><td>The sel4utils vspace reservation. </td></tr>
    <tr><td class="paramname">cacheable</td><td>Whether to create the window flagged as cached. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The assigned window structure if success, NULL otherwise. No ownership transfer. </dd></dl>

</div>
</div>
<a id="a96174bffd435d136747a6d31458cf068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96174bffd435d136747a6d31458cf068">&#9670;&nbsp;</a></span>w_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_deinit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitialises the window list, and release all windows in it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to deinitialise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5a79fdae23d3ad0a6e3bc576b85f29f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5a79fdae23d3ad0a6e3bc576b85f29f">&#9670;&nbsp;</a></span>w_delete_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int w_delete_window </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>windowID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a window at given index from list, along with any stored caps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to delete from. </td></tr>
    <tr><td class="paramname">windowID</td><td>The windowID to delete. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS if success, RefOS error otherwise. </dd></dl>

</div>
</div>
<a id="aaa3b1959562f54bef8b78468b41984f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa3b1959562f54bef8b78468b41984f5">&#9670;&nbsp;</a></span>w_get_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structw__window.html">w_window</a>* w_get_window </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>windowID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the window structure associated with given windowID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to delete from. </td></tr>
    <tr><td class="paramname">windowID</td><td>The windowID to delete. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding window structure if success, NULL otherwise. </dd></dl>

</div>
</div>
<a id="a50d15297323142839025be813db1b963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50d15297323142839025be813db1b963">&#9670;&nbsp;</a></span>w_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the window list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to initialise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44aa78fe0968102f33ab66d782bc648c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44aa78fe0968102f33ab66d782bc648c">&#9670;&nbsp;</a></span>w_purge_dspace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_purge_dspace </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__list.html">w_list</a> *&#160;</td>
          <td class="paramname"><em>wlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structram__dspace.html">ram_dspace</a> *&#160;</td>
          <td class="paramname"><em>dspace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify of the window list of the death of a dataspace. </p>
<p>Notify of the window list of the death of a dataspace. If any windows in the list are found to be set to be initialised by the given dataspace, that window will be reset to W_MODE_EMPTY, and the dataspace dereferenced. Potentially does VSpace unmapping operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">wlist</td><td>The window list to purge from. </td></tr>
    <tr><td class="paramname">dspace</td><td>The internal RAM dataspace to purge all references to. (No ownership) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9dd50c96ecc3caca92238b48aa1a05b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd50c96ecc3caca92238b48aa1a05b5">&#9670;&nbsp;</a></span>w_resize_window()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int w_resize_window </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>vaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resize a window. Note that this does not perform any window associate updates or checks, nor any vspace operations, simply updates the field in the global window list entry, and re-reserves the owned reservation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">window</td><td>The window to update size for. </td></tr>
    <tr><td class="paramname">vaddr</td><td>The vaddr of the window. Should <em>not</em> change from what it was before. </td></tr>
    <tr><td class="paramname">size</td><td>The new window size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS if success, RefOS error otherwise. </dd></dl>

</div>
</div>
<a id="a54d3dc3777891e424ea14bd4f8eee1ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54d3dc3777891e424ea14bd4f8eee1ca">&#9670;&nbsp;</a></span>w_set_anon_dspace()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_set_anon_dspace </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structram__dspace.html">ram_dspace</a> *&#160;</td>
          <td class="paramname"><em>dspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pager_8h.html#a7d72eb642e1a38d355db6a57460d5973">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an internal RAM dataspace as the window's source of data. Potentially does VSpace unmapping operations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">window</td><td>The window to set to anonymous dataspace mode. </td></tr>
    <tr><td class="paramname">dspace</td><td>The internal RAM dataspace to set the window to (Shares ownership). NULL means clear this window back to empty. </td></tr>
    <tr><td class="paramname">offset</td><td>Offset into the dataspace at which this window is mapped. Alignment restrictions apply. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae3dad141a48a124c797976f54bbd63f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3dad141a48a124c797976f54bbd63f3">&#9670;&nbsp;</a></span>w_set_pager_endpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_set_pager_endpoint </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__window.html">w_window</a> *&#160;</td>
          <td class="paramname"><em>window</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cspacepath_t&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the window up to be paged by an external pager. Potentially does VSpace unmapping operations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">window</td><td>The window to set in pager mode. </td></tr>
    <tr><td class="paramname">endpoint</td><td>The pager asynchronous notification endpoint of the window. Takes ownership. </td></tr>
    <tr><td class="paramname">pid</td><td>The pager PID. (No ownership) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aefa613ff5c54a2e8f830adebb618de12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefa613ff5c54a2e8f830adebb618de12">&#9670;&nbsp;</a></span>w_unassociate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void w_unassociate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structw__associated__windowlist.html">w_associated_windowlist</a> *&#160;</td>
          <td class="paramname"><em>aw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>winID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unassociate a window from a process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aw</td><td>The window association list of a process. </td></tr>
    <tr><td class="paramname">winID</td><td>The window ID of the window to be unassociated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_53aa6d20d2a83f4c89c1fd34dd1fa489.html">process_server</a></li><li class="navelem"><a class="el" href="dir_2020bcb30412175c6238bd50c5604389.html">src</a></li><li class="navelem"><a class="el" href="dir_88a707bee8654bad827f225accdc13fe.html">system</a></li><li class="navelem"><a class="el" href="dir_d1a36d1ccb4b21eee2130172b2c49c6d.html">memserv</a></li><li class="navelem"><a class="el" href="window_8h.html">window.h</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 10:14:24 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
