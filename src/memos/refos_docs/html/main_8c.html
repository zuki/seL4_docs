<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: apps/process_server/src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Top-level main module for process server.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="process__server_2src_2state_8h_source.html">state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="apps_2process__server_2src_2test_2test_8h_source.html">test/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="proc__syscall_8h_source.html">dispatchers/proc_syscall.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mem__syscall_8h_source.html">dispatchers/mem_syscall.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="data__syscall_8h_source.html">dispatchers/data_syscall.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="name__syscall_8h_source.html">dispatchers/name_syscall.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fault__handler_8h_source.html">dispatchers/fault_handler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="process_8h_source.html">system/process/process.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a22fced0265cfe4b3631893d99073f4c5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a22fced0265cfe4b3631893d99073f4c5">proc_server_handle_message</a> (struct <a class="el" href="structprocserv__state.html">procserv_state</a> *s, struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *msg)</td></tr>
<tr class="memdesc:a22fced0265cfe4b3631893d99073f4c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process server IPC message handler.  <a href="main_8c.html#a22fced0265cfe4b3631893d99073f4c5">More...</a><br /></td></tr>
<tr class="separator:a22fced0265cfe4b3631893d99073f4c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c6d96b11d9c79f7e1db1e310ba0d85"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a79c6d96b11d9c79f7e1db1e310ba0d85">proc_server_loop</a> (void)</td></tr>
<tr class="memdesc:a79c6d96b11d9c79f7e1db1e310ba0d85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main process server loop.  <a href="main_8c.html#a79c6d96b11d9c79f7e1db1e310ba0d85">More...</a><br /></td></tr>
<tr class="separator:a79c6d96b11d9c79f7e1db1e310ba0d85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process server main entry point.  <a href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Top-level main module for process server. </p>
<p>The top level main module of the process server, containing the main function which runs as the initial kernel thread. Starts up the process server, bootstraps itself, initialises the submodules, and and starts the rest of system.</p>
<p>The process server is responsible for implementing threads &amp; processes, manage memory window segments, expose anon memory dataspaces, and hand off other system resources to the system processes available (such as device and IRQ caps device servers).</p>
<div class="image">
<img src="procserv.png" alt=""/>
</div>
<p>The process server's anonymous dataspace implementation: </p><ul>
<li>
Assumes the connection session is set up, so therefore does not support connection establishment. </li>
<li>
Ignores the fileName parameter of the open method; makes no sense for anon memory. </li>
<li>
Reads the nBytes parameter of the open method, as the max. size of the ram dataspace created.  </li>
<li>
Does NOT implement set_parambuffer, it shares the parambuffer from procserv interface and reads that instead.  </li>
<li>
Supports the parambuffer (set in the procserv interface) coming from a ram dataspace provided by the process server itself.  </li>
<li>
Does not support content initialisation via init_data. Process server cannot provide content for another dataserver in the current implementation. </li>
<li>
Does support have_data and provide_data. In other words, process server RAM dataspace can have its content initialised by an external dataserver. </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process server main entry point. </p>

</div>
</div>
<a id="a22fced0265cfe4b3631893d99073f4c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22fced0265cfe4b3631893d99073f4c5">&#9670;&nbsp;</a></span>proc_server_handle_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void proc_server_handle_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprocserv__state.html">procserv_state</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprocserv__msg.html">procserv_msg</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process server IPC message handler. </p>
<p>Handles dispatching of all process server IPC messages. Calls each individual dispatcher until the correct dispatcher for the message type has been found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The process server global state. </td></tr>
    <tr><td class="paramname">msg</td><td>The process server recieved message info. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a79c6d96b11d9c79f7e1db1e310ba0d85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79c6d96b11d9c79f7e1db1e310ba0d85">&#9670;&nbsp;</a></span>proc_server_loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int proc_server_loop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main process server loop. </p>
<p>The main loop that the process server goes into and keeps looping until the process server is to exit and the whole system is to by shut down (which is possibly never). It blocks on the process server endpoint and waits for an IPC message, and then handles the dispatching of the message when it recieves one, before looping around and waiting for the next IPC message.</p>
<dl class="section return"><dt>Returns</dt><dd>Does not return, runs endlessly. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_53aa6d20d2a83f4c89c1fd34dd1fa489.html">process_server</a></li><li class="navelem"><a class="el" href="dir_2020bcb30412175c6238bd50c5604389.html">src</a></li><li class="navelem"><a class="el" href="main_8c.html">main.c</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 17:16:02 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
