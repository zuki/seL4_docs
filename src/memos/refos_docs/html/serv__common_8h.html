<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: libs/librefos/include/refos-util/serv_common.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('serv__common_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">serv_common.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Server common shared helper functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;sel4/sel4.h&gt;</code><br />
<code>#include &lt;<a class="el" href="refos_8h_source.html">refos/refos.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="dprintf_8h_source.html">refos-util/dprintf.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="serv__connect_8h_source.html">refos-util/serv_connect.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="data__client_8h_source.html">refos-rpc/data_client.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="data__client__helper_8h_source.html">refos-rpc/data_client_helper.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="proc__common_8h_source.html">refos-rpc/proc_common.h</a>&gt;</code><br />
</div>
<p><a href="serv__common_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsrv__msg.html">srv_msg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common server dispatcher message structure.  <a href="structsrv__msg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsrv__common__config.html">srv_common_config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common server state configuration.  <a href="structsrv__common__config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsrv__common.html">srv_common</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common server state structure.  <a href="structsrv__common.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsrv__common__notify__handler__callbacks.html">srv_common_notify_handler_callbacks</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notification handler callbacks structure.  <a href="structsrv__common__notify__handler__callbacks.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acd38d2c28ecdd38bcaa617f01ab60c2e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#acd38d2c28ecdd38bcaa617f01ab60c2e">printf</a>(x, ...)</td></tr>
<tr class="separator:acd38d2c28ecdd38bcaa617f01ab60c2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0df2002ee858dbb2043a8b4de44dd1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a0c0df2002ee858dbb2043a8b4de44dd1">SRV_UNBADGED</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a0c0df2002ee858dbb2043a8b4de44dd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f44e30b97d39e36ce872146bceed9ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a2f44e30b97d39e36ce872146bceed9ae">SRV_DEFAULT_MAX_CLIENTS</a>&#160;&#160;&#160;<a class="el" href="refos_8h.html#a8ad602bbe39c20abd5af86f5e8bce989">PROCSERV_MAX_PROCESSES</a></td></tr>
<tr class="separator:a2f44e30b97d39e36ce872146bceed9ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35ae22af0ba388a54657e767ecf184dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a35ae22af0ba388a54657e767ecf184dd">SRV_DEFAULT_NOTIFICATION_BUFFER_SIZE</a>&#160;&#160;&#160;0x8000</td></tr>
<tr class="separator:a35ae22af0ba388a54657e767ecf184dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fe3f18c77371dac1d559ca9f106ebef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a9fe3f18c77371dac1d559ca9f106ebef">SRV_DEFAULT_PARAM_BUFFER_SIZE</a>&#160;&#160;&#160;0x2000</td></tr>
<tr class="separator:a9fe3f18c77371dac1d559ca9f106ebef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc871f04741f71129c7465d5e0709d2c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#acc871f04741f71129c7465d5e0709d2c">SRV_MAGIC</a>&#160;&#160;&#160;0x261A2055</td></tr>
<tr class="separator:acc871f04741f71129c7465d5e0709d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e18142a93bcdfcd74ac009bfc3400d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a88e18142a93bcdfcd74ac009bfc3400d">SET_ERRNO_PTR</a>(e,  ev)&#160;&#160;&#160;if (e) {(*e) = (ev);}</td></tr>
<tr class="separator:a88e18142a93bcdfcd74ac009bfc3400d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a31b2623867d2146df7bc0377664561e9"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsrv__msg.html">srv_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a31b2623867d2146df7bc0377664561e9">srv_msg_t</a></td></tr>
<tr class="memdesc:a31b2623867d2146df7bc0377664561e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common server dispatcher message structure.  <a href="serv__common_8h.html#a31b2623867d2146df7bc0377664561e9">More...</a><br /></td></tr>
<tr class="separator:a31b2623867d2146df7bc0377664561e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd809408156e8a05ec20792546b2911"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsrv__common__config.html">srv_common_config</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a3cd809408156e8a05ec20792546b2911">srv_common_config_t</a></td></tr>
<tr class="memdesc:a3cd809408156e8a05ec20792546b2911"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common server state configuration.  <a href="serv__common_8h.html#a3cd809408156e8a05ec20792546b2911">More...</a><br /></td></tr>
<tr class="separator:a3cd809408156e8a05ec20792546b2911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae113e8bb0715e5ed110782452a1ba154"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsrv__common.html">srv_common</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a></td></tr>
<tr class="separator:ae113e8bb0715e5ed110782452a1ba154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d847152f84c06f413e976f13e2de146"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a0d847152f84c06f413e976f13e2de146">srv_notify_handler_callback_fn_t</a>) (struct <a class="el" href="structproc__notification.html">proc_notification</a> *notification)</td></tr>
<tr class="memdesc:a0d847152f84c06f413e976f13e2de146"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notification handler callback type.  <a href="serv__common_8h.html#a0d847152f84c06f413e976f13e2de146">More...</a><br /></td></tr>
<tr class="separator:a0d847152f84c06f413e976f13e2de146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9633bbf7474ad93e467a5c4698e5810"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsrv__common__notify__handler__callbacks.html">srv_common_notify_handler_callbacks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#ae9633bbf7474ad93e467a5c4698e5810">srv_common_notify_handler_callbacks_t</a></td></tr>
<tr class="memdesc:ae9633bbf7474ad93e467a5c4698e5810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notification handler callbacks structure.  <a href="serv__common_8h.html#ae9633bbf7474ad93e467a5c4698e5810">More...</a><br /></td></tr>
<tr class="separator:ae9633bbf7474ad93e467a5c4698e5810"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aae2afa152567261e79b0191256098bf1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#aae2afa152567261e79b0191256098bf1">srv_dispatch_return_code_enum</a> { <a class="el" href="serv__common_8h.html#aae2afa152567261e79b0191256098bf1a7cae02718287aa862b1ce811b80a5db3">DISPATCH_ERROR</a> = -2
, <a class="el" href="serv__common_8h.html#aae2afa152567261e79b0191256098bf1a1b642f56e6400ba4a018636117ee07d4">DISPATCH_PASS</a>
, <a class="el" href="serv__common_8h.html#aae2afa152567261e79b0191256098bf1a0bc0a31ff889389302a2f1336ee9b182">DISPATCH_SUCCESS</a>
 }</td></tr>
<tr class="memdesc:aae2afa152567261e79b0191256098bf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum to keep track of the common server dispatching return values.  <a href="serv__common_8h.html#aae2afa152567261e79b0191256098bf1">More...</a><br /></td></tr>
<tr class="separator:aae2afa152567261e79b0191256098bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0368fdd39de7a478b95f579752c08e00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a0368fdd39de7a478b95f579752c08e00">srv_common_init</a> (<a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a> *s, <a class="el" href="serv__common_8h.html#a3cd809408156e8a05ec20792546b2911">srv_common_config_t</a> config)</td></tr>
<tr class="memdesc:a0368fdd39de7a478b95f579752c08e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise server common state.  <a href="serv__common_8h.html#a0368fdd39de7a478b95f579752c08e00">More...</a><br /></td></tr>
<tr class="separator:a0368fdd39de7a478b95f579752c08e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f19537b29c3d63070db752384cf9247"><td class="memItemLeft" align="right" valign="top">seL4_CPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a8f19537b29c3d63070db752384cf9247">srv_mint</a> (int badge, seL4_CPtr ep)</td></tr>
<tr class="memdesc:a8f19537b29c3d63070db752384cf9247"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to mint a badged server endpoint cap.  <a href="serv__common_8h.html#a8f19537b29c3d63070db752384cf9247">More...</a><br /></td></tr>
<tr class="separator:a8f19537b29c3d63070db752384cf9247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22a5756a1adf2f16d21859cbf9865a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#ab22a5756a1adf2f16d21859cbf9865a3">srv_check_dispatch_caps</a> (<a class="el" href="serv__common_8h.html#a31b2623867d2146df7bc0377664561e9">srv_msg_t</a> *<a class="el" href="muse_8c.html#a2be9fd1bd420b11f443b4b54d13f2b4d">m</a>, seL4_Word unwrappedMask, int numExtraCaps)</td></tr>
<tr class="memdesc:ab22a5756a1adf2f16d21859cbf9865a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to check recieved caps and unwrapped mask.  <a href="serv__common_8h.html#ab22a5756a1adf2f16d21859cbf9865a3">More...</a><br /></td></tr>
<tr class="separator:ab22a5756a1adf2f16d21859cbf9865a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65dda46be5aaa3168b346bd2f4e75ecf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serv__common_8h.html#a65dda46be5aaa3168b346bd2f4e75ecf">srv_dispatch_notification</a> (<a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a> *srv, <a class="el" href="serv__common_8h.html#ae9633bbf7474ad93e467a5c4698e5810">srv_common_notify_handler_callbacks_t</a> <a class="el" href="region_8c.html#ad29a76e7f515cea23ce07477430089bb">callbacks</a>)</td></tr>
<tr class="memdesc:a65dda46be5aaa3168b346bd2f4e75ecf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server notification dispatcher helper.  <a href="serv__common_8h.html#a65dda46be5aaa3168b346bd2f4e75ecf">More...</a><br /></td></tr>
<tr class="separator:a65dda46be5aaa3168b346bd2f4e75ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Server common shared helper functions. </p>
<p>This module implements helper functions to help reduce the work required to get a RefOS server up and running. It handles the most common setup cases for servers, especially dataspace servers, including endpoint creation, registration, and so forth. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acd38d2c28ecdd38bcaa617f01ab60c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd38d2c28ecdd38bcaa617f01ab60c2e">&#9670;&nbsp;</a></span>printf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define printf</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a88e18142a93bcdfcd74ac009bfc3400d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e18142a93bcdfcd74ac009bfc3400d">&#9670;&nbsp;</a></span>SET_ERRNO_PTR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SET_ERRNO_PTR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ev&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;if (e) {(*e) = (ev);}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2f44e30b97d39e36ce872146bceed9ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f44e30b97d39e36ce872146bceed9ae">&#9670;&nbsp;</a></span>SRV_DEFAULT_MAX_CLIENTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRV_DEFAULT_MAX_CLIENTS&#160;&#160;&#160;<a class="el" href="refos_8h.html#a8ad602bbe39c20abd5af86f5e8bce989">PROCSERV_MAX_PROCESSES</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a35ae22af0ba388a54657e767ecf184dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35ae22af0ba388a54657e767ecf184dd">&#9670;&nbsp;</a></span>SRV_DEFAULT_NOTIFICATION_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRV_DEFAULT_NOTIFICATION_BUFFER_SIZE&#160;&#160;&#160;0x8000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9fe3f18c77371dac1d559ca9f106ebef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fe3f18c77371dac1d559ca9f106ebef">&#9670;&nbsp;</a></span>SRV_DEFAULT_PARAM_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRV_DEFAULT_PARAM_BUFFER_SIZE&#160;&#160;&#160;0x2000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acc871f04741f71129c7465d5e0709d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc871f04741f71129c7465d5e0709d2c">&#9670;&nbsp;</a></span>SRV_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRV_MAGIC&#160;&#160;&#160;0x261A2055</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a0c0df2002ee858dbb2043a8b4de44dd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0df2002ee858dbb2043a8b4de44dd1">&#9670;&nbsp;</a></span>SRV_UNBADGED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SRV_UNBADGED&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a3cd809408156e8a05ec20792546b2911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd809408156e8a05ec20792546b2911">&#9670;&nbsp;</a></span>srv_common_config_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsrv__common__config.html">srv_common_config</a> <a class="el" href="serv__common_8h.html#a3cd809408156e8a05ec20792546b2911">srv_common_config_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common server state configuration. </p>
<p>This structure stores the server's configuration, including things like name to register under, badge layouts, number of max clients, and so forth. Servers wishing to use this library should fill this config structure with their configuration parameters then pass this into <a class="el" href="serv__common_8h.html#a0368fdd39de7a478b95f579752c08e00" title="Initialise server common state.">srv_common_init()</a>. </p>

</div>
</div>
<a id="ae9633bbf7474ad93e467a5c4698e5810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9633bbf7474ad93e467a5c4698e5810">&#9670;&nbsp;</a></span>srv_common_notify_handler_callbacks_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsrv__common__notify__handler__callbacks.html">srv_common_notify_handler_callbacks</a> <a class="el" href="serv__common_8h.html#ae9633bbf7474ad93e467a5c4698e5810">srv_common_notify_handler_callbacks_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notification handler callbacks structure. </p>

</div>
</div>
<a id="ae113e8bb0715e5ed110782452a1ba154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae113e8bb0715e5ed110782452a1ba154">&#9670;&nbsp;</a></span>srv_common_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsrv__common.html">srv_common</a> <a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a31b2623867d2146df7bc0377664561e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31b2623867d2146df7bc0377664561e9">&#9670;&nbsp;</a></span>srv_msg_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsrv__msg.html">srv_msg</a> <a class="el" href="serv__common_8h.html#a31b2623867d2146df7bc0377664561e9">srv_msg_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common server dispatcher message structure. </p>
<p>Simple structure containing the seL4 message and seL4 badge recieved from the IPC. </p>

</div>
</div>
<a id="a0d847152f84c06f413e976f13e2de146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d847152f84c06f413e976f13e2de146">&#9670;&nbsp;</a></span>srv_notify_handler_callback_fn_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* srv_notify_handler_callback_fn_t) (struct <a class="el" href="structproc__notification.html">proc_notification</a> *notification)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notification handler callback type. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aae2afa152567261e79b0191256098bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae2afa152567261e79b0191256098bf1">&#9670;&nbsp;</a></span>srv_dispatch_return_code_enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="serv__common_8h.html#aae2afa152567261e79b0191256098bf1">srv_dispatch_return_code_enum</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum to keep track of the common server dispatching return values. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aae2afa152567261e79b0191256098bf1a7cae02718287aa862b1ce811b80a5db3"></a>DISPATCH_ERROR&#160;</td><td class="fielddoc"><p>A dispatch error has occured. Should not happen. </p>
</td></tr>
<tr><td class="fieldname"><a id="aae2afa152567261e79b0191256098bf1a1b642f56e6400ba4a018636117ee07d4"></a>DISPATCH_PASS&#160;</td><td class="fielddoc"><p>Wrong dispatcher. Pass onto another one. </p>
</td></tr>
<tr><td class="fieldname"><a id="aae2afa152567261e79b0191256098bf1a0bc0a31ff889389302a2f1336ee9b182"></a>DISPATCH_SUCCESS&#160;</td><td class="fielddoc"><p>This is the correct dispatcher, or correctly dispatched. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab22a5756a1adf2f16d21859cbf9865a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22a5756a1adf2f16d21859cbf9865a3">&#9670;&nbsp;</a></span>srv_check_dispatch_caps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool srv_check_dispatch_caps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serv__common_8h.html#a31b2623867d2146df7bc0377664561e9">srv_msg_t</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">seL4_Word&#160;</td>
          <td class="paramname"><em>unwrappedMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numExtraCaps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to check recieved caps and unwrapped mask. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>The recieved message. </td></tr>
    <tr><td class="paramname">unwrappedMask</td><td>The expected capability unwrap mask. </td></tr>
    <tr><td class="paramname">numExtraCaps</td><td>The expected nubmer of recieved capabilities. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the recieved message capabilities match the unwrapped mask and number, false if there is a mismatck and the recieved caps are invalid. </dd></dl>

</div>
</div>
<a id="a0368fdd39de7a478b95f579752c08e00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0368fdd39de7a478b95f579752c08e00">&#9670;&nbsp;</a></span>srv_common_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_common_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="serv__common_8h.html#a3cd809408156e8a05ec20792546b2911">srv_common_config_t</a>&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise server common state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The common server state structure to initialise. </td></tr>
    <tr><td class="paramname">config</td><td>The structure containing info on server configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS on success, refos_err_t error otherwise. </dd></dl>

</div>
</div>
<a id="a65dda46be5aaa3168b346bd2f4e75ecf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65dda46be5aaa3168b346bd2f4e75ecf">&#9670;&nbsp;</a></span>srv_dispatch_notification()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int srv_dispatch_notification </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="serv__common_8h.html#ae113e8bb0715e5ed110782452a1ba154">srv_common_t</a> *&#160;</td>
          <td class="paramname"><em>srv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="serv__common_8h.html#ae9633bbf7474ad93e467a5c4698e5810">srv_common_notify_handler_callbacks_t</a>&#160;</td>
          <td class="paramname"><em>callbacks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Server notification dispatcher helper. </p>
<p>The goal of this helper function is to remove the common shared ringbuffer notification reading and handling routines used by servers wishing to recieve async notifications. When a message is read from the given server state's notification buffer, then the corresponding callback handler function pointer is called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srv</td><td>The server common state structure. (No ownership) </td></tr>
    <tr><td class="paramname">callbacks</td><td>Struct containing callbacks, one for each possible type of notification. If the given server does not handle a certain type of notification, simply set the corresponding callback as NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS on success, refos_err_t error otherwise. <br  />
 </dd></dl>

</div>
</div>
<a id="a8f19537b29c3d63070db752384cf9247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f19537b29c3d63070db752384cf9247">&#9670;&nbsp;</a></span>srv_mint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">seL4_CPtr srv_mint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>badge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">seL4_CPtr&#160;</td>
          <td class="paramname"><em>ep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to mint a badged server endpoint cap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">badge</td><td>The badge ID to mint. </td></tr>
    <tr><td class="paramname">ep</td><td>The endpoint to mint from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The minted capability (Ownership transferred). </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_6719ab1f1f7655efc2fa43f7eb574fd1.html">libs</a></li><li class="navelem"><a class="el" href="dir_e1f5680096cde1ba172dd0a26cecf023.html">librefos</a></li><li class="navelem"><a class="el" href="dir_4edadee5b8d2d92bd69056f9c1d43ce3.html">include</a></li><li class="navelem"><a class="el" href="dir_77bfc0fb42e2766b94409dfef578a207.html">refos-util</a></li><li class="navelem"><a class="el" href="serv__common_8h.html">serv_common.h</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 10:14:24 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
