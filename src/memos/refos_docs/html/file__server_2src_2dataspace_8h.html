<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RefOS: apps/file_server/src/dataspace.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RefOS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Multi-server operating system on seL4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('file__server_2src_2dataspace_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dataspace.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>File server CPIO dataspace object allocation and management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;<a class="el" href="cvector_8h_source.html">data_struct/cvector.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="coat_8h_source.html">data_struct/coat.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="chash_8h_source.html">data_struct/chash.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="refos_8h_source.html">refos/refos.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rpc_8h_source.html">refos-rpc/rpc.h</a>&gt;</code><br />
</div>
<p><a href="file__server_2src_2dataspace_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__dataspace.html">fs_dataspace</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">File server dataspace.  <a href="structfs__dataspace.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdataspace__association__info.html">dataspace_association_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">File server CPIO dataspace association.  <a href="structdataspace__association__info.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a452e22f2fa31f5fbe3b551477f15ec0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a452e22f2fa31f5fbe3b551477f15ec0d">FILESERVER_MAX_DATASPACES</a>&#160;&#160;&#160;8192</td></tr>
<tr class="separator:a452e22f2fa31f5fbe3b551477f15ec0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93075bee34fb26e20c06d19e80222664"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a93075bee34fb26e20c06d19e80222664">FILESERVER_DSPACE_ASSOC_HASHSIZE</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:a93075bee34fb26e20c06d19e80222664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae16563511ba70d06ee482f5d3216b2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#aae16563511ba70d06ee482f5d3216b2d">FILESERVER_WINDOW_ASSOC_HASHSIZE</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:aae16563511ba70d06ee482f5d3216b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c405d37cf65e2a71bbbc69192d2f24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a87c405d37cf65e2a71bbbc69192d2f24">FS_DATASPACE_MAGIC</a>&#160;&#160;&#160;0x4B1C8007</td></tr>
<tr class="separator:a87c405d37cf65e2a71bbbc69192d2f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a87effc683d02a21b8259843ddaad8873"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a87effc683d02a21b8259843ddaad8873">dspace_table_init</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt)</td></tr>
<tr class="memdesc:a87effc683d02a21b8259843ddaad8873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise CPIO dataspace allocation table.  <a href="file__server_2src_2dataspace_8h.html#a87effc683d02a21b8259843ddaad8873">More...</a><br /></td></tr>
<tr class="separator:a87effc683d02a21b8259843ddaad8873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6c49c2add6c1fcf411c3e1425f562a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a1c6c49c2add6c1fcf411c3e1425f562a">dspace_table_release</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt)</td></tr>
<tr class="memdesc:a1c6c49c2add6c1fcf411c3e1425f562a"><td class="mdescLeft">&#160;</td><td class="mdescRight">De-initialise a CPIO dataspace allocation table.  <a href="file__server_2src_2dataspace_8h.html#a1c6c49c2add6c1fcf411c3e1425f562a">More...</a><br /></td></tr>
<tr class="separator:a1c6c49c2add6c1fcf411c3e1425f562a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe865af9d5a8b59ca8e7457ea6271144"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfs__dataspace.html">fs_dataspace</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#abe865af9d5a8b59ca8e7457ea6271144">dspace_alloc</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, uint32_t deathID, char *fileData, size_t fileDataSize, seL4_Word permissions)</td></tr>
<tr class="memdesc:abe865af9d5a8b59ca8e7457ea6271144"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns an dataspace ID and creates a <a class="el" href="structfs__dataspace.html" title="File server dataspace.">fs_dataspace</a> structure.  <a href="file__server_2src_2dataspace_8h.html#abe865af9d5a8b59ca8e7457ea6271144">More...</a><br /></td></tr>
<tr class="separator:abe865af9d5a8b59ca8e7457ea6271144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1906700cc8c18a15eba4749404b03794"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfs__dataspace.html">fs_dataspace</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a1906700cc8c18a15eba4749404b03794">dspace_get</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int id)</td></tr>
<tr class="memdesc:a1906700cc8c18a15eba4749404b03794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the associated dataspace structure given an ID.  <a href="file__server_2src_2dataspace_8h.html#a1906700cc8c18a15eba4749404b03794">More...</a><br /></td></tr>
<tr class="separator:a1906700cc8c18a15eba4749404b03794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2be021e2d483a70d9633890b8bd2b89"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structfs__dataspace.html">fs_dataspace</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#ac2be021e2d483a70d9633890b8bd2b89">dspace_get_badge</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int badge)</td></tr>
<tr class="memdesc:ac2be021e2d483a70d9633890b8bd2b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the associated dataspace structure given an unwrapped badge.  <a href="file__server_2src_2dataspace_8h.html#ac2be021e2d483a70d9633890b8bd2b89">More...</a><br /></td></tr>
<tr class="separator:ac2be021e2d483a70d9633890b8bd2b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0db1a6e4fc22e18258d4f6855a444f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#aa0db1a6e4fc22e18258d4f6855a444f8">dspace_delete</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int id)</td></tr>
<tr class="memdesc:aa0db1a6e4fc22e18258d4f6855a444f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the given dataspace and release all its memory.  <a href="file__server_2src_2dataspace_8h.html#aa0db1a6e4fc22e18258d4f6855a444f8">More...</a><br /></td></tr>
<tr class="separator:aa0db1a6e4fc22e18258d4f6855a444f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d08475638529de668fe90a0bf23b858"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a5d08475638529de668fe90a0bf23b858">dspace_window_associate</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int winID, int dsID, int dsOffset, seL4_CPtr windowCap)</td></tr>
<tr class="memdesc:a5d08475638529de668fe90a0bf23b858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate given window with the dataspace.  <a href="file__server_2src_2dataspace_8h.html#a5d08475638529de668fe90a0bf23b858">More...</a><br /></td></tr>
<tr class="separator:a5d08475638529de668fe90a0bf23b858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4acbaffed8e567e4d9e45a53bdf6396"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#ab4acbaffed8e567e4d9e45a53bdf6396">dspace_window_unassociate</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int winID)</td></tr>
<tr class="memdesc:ab4acbaffed8e567e4d9e45a53bdf6396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Un-associate given window with previously associated dataspace.  <a href="file__server_2src_2dataspace_8h.html#ab4acbaffed8e567e4d9e45a53bdf6396">More...</a><br /></td></tr>
<tr class="separator:ab4acbaffed8e567e4d9e45a53bdf6396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b76842c14e9cc93610e2901cbe8bd2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdataspace__association__info.html">dataspace_association_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a26b76842c14e9cc93610e2901cbe8bd2">dspace_window_find</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int winID)</td></tr>
<tr class="memdesc:a26b76842c14e9cc93610e2901cbe8bd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the dataspace associated with given windowID.  <a href="file__server_2src_2dataspace_8h.html#a26b76842c14e9cc93610e2901cbe8bd2">More...</a><br /></td></tr>
<tr class="separator:a26b76842c14e9cc93610e2901cbe8bd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3fb687e9374230d6299dca7cd4c5b4a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#ad3fb687e9374230d6299dca7cd4c5b4a">dspace_external_associate</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int xdsID, int dsID, int dsOffset, seL4_CPtr xdspaceCap)</td></tr>
<tr class="memdesc:ad3fb687e9374230d6299dca7cd4c5b4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Associate given external dataspace with the dataspace.  <a href="file__server_2src_2dataspace_8h.html#ad3fb687e9374230d6299dca7cd4c5b4a">More...</a><br /></td></tr>
<tr class="separator:ad3fb687e9374230d6299dca7cd4c5b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a271a86148da43ab956b8c71538374067"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a271a86148da43ab956b8c71538374067">dspace_external_unassociate</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int xdsID)</td></tr>
<tr class="memdesc:a271a86148da43ab956b8c71538374067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Un-associate given external dataspace with the dataspace.  <a href="file__server_2src_2dataspace_8h.html#a271a86148da43ab956b8c71538374067">More...</a><br /></td></tr>
<tr class="separator:a271a86148da43ab956b8c71538374067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e35d66ea8bfd94f56917a9aac6c60c5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdataspace__association__info.html">dataspace_association_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="file__server_2src_2dataspace_8h.html#a3e35d66ea8bfd94f56917a9aac6c60c5">dspace_external_find</a> (struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *dt, int xdsID)</td></tr>
<tr class="memdesc:a3e35d66ea8bfd94f56917a9aac6c60c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the dataspace associated with given external dataspaceID.  <a href="file__server_2src_2dataspace_8h.html#a3e35d66ea8bfd94f56917a9aac6c60c5">More...</a><br /></td></tr>
<tr class="separator:a3e35d66ea8bfd94f56917a9aac6c60c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File server CPIO dataspace object allocation and management. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a93075bee34fb26e20c06d19e80222664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93075bee34fb26e20c06d19e80222664">&#9670;&nbsp;</a></span>FILESERVER_DSPACE_ASSOC_HASHSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILESERVER_DSPACE_ASSOC_HASHSIZE&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a452e22f2fa31f5fbe3b551477f15ec0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452e22f2fa31f5fbe3b551477f15ec0d">&#9670;&nbsp;</a></span>FILESERVER_MAX_DATASPACES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILESERVER_MAX_DATASPACES&#160;&#160;&#160;8192</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aae16563511ba70d06ee482f5d3216b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae16563511ba70d06ee482f5d3216b2d">&#9670;&nbsp;</a></span>FILESERVER_WINDOW_ASSOC_HASHSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILESERVER_WINDOW_ASSOC_HASHSIZE&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a87c405d37cf65e2a71bbbc69192d2f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c405d37cf65e2a71bbbc69192d2f24">&#9670;&nbsp;</a></span>FS_DATASPACE_MAGIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FS_DATASPACE_MAGIC&#160;&#160;&#160;0x4B1C8007</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abe865af9d5a8b59ca8e7457ea6271144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe865af9d5a8b59ca8e7457ea6271144">&#9670;&nbsp;</a></span>dspace_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfs__dataspace.html">fs_dataspace</a>* dspace_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>deathID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fileData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fileDataSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">seL4_Word&#160;</td>
          <td class="paramname"><em>permissions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns an dataspace ID and creates a <a class="el" href="structfs__dataspace.html" title="File server dataspace.">fs_dataspace</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table to allocate from. </td></tr>
    <tr><td class="paramname">deathID</td><td>The dspace table to allocate from. </td></tr>
    <tr><td class="paramname">fileData</td><td>The CPIO file data pointer. (No ownership passed) </td></tr>
    <tr><td class="paramname">fileDataSize</td><td>The CPIO file data size. </td></tr>
    <tr><td class="paramname">permissions</td><td>The dataspace permissions mask. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Weak pointer to created dataspace. (ie. No ownership) </dd></dl>

</div>
</div>
<a id="aa0db1a6e4fc22e18258d4f6855a444f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0db1a6e4fc22e18258d4f6855a444f8">&#9670;&nbsp;</a></span>dspace_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dspace_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete the given dataspace and release all its memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table to get from. </td></tr>
    <tr><td class="paramname">id</td><td>The dataspace ID of the dataspace to delete. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad3fb687e9374230d6299dca7cd4c5b4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3fb687e9374230d6299dca7cd4c5b4a">&#9670;&nbsp;</a></span>dspace_external_associate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dspace_external_associate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xdsID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dsID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dsOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">seL4_CPtr&#160;</td>
          <td class="paramname"><em>xdspaceCap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate given external dataspace with the dataspace. </p>
<p>When a client data-inits an external CPIO dataspace with one of ours, we need to book-keep the externalDS ――▶ internalDS relationship. This function does this book-keeping, so when the external dataserv notifies us to provide content for one of its dataspaces, we know which internal dspace to initialise with.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table. </td></tr>
    <tr><td class="paramname">xdsID</td><td>The external dataspace ID. Need to call data_have_data on the external-dataspace before calling this function, which will give us an external dataspace ID. </td></tr>
    <tr><td class="paramname">dsID</td><td>The internal dataspace ID, which contains the content to be initialised. </td></tr>
    <tr><td class="paramname">dsOffset</td><td>The offset into the dataspace, at which it is content initialised. </td></tr>
    <tr><td class="paramname">xdspaceCap</td><td>The external dataspace cap. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS on success, refos_err_t otherwise. </dd></dl>

</div>
</div>
<a id="a3e35d66ea8bfd94f56917a9aac6c60c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e35d66ea8bfd94f56917a9aac6c60c5">&#9670;&nbsp;</a></span>dspace_external_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdataspace__association__info.html">dataspace_association_info</a>* dspace_external_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xdsID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the dataspace associated with given external dataspaceID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table. </td></tr>
    <tr><td class="paramname">xdsID</td><td>The external dataspace ID to find associated internal dataspace for. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a271a86148da43ab956b8c71538374067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a271a86148da43ab956b8c71538374067">&#9670;&nbsp;</a></span>dspace_external_unassociate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dspace_external_unassociate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xdsID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Un-associate given external dataspace with the dataspace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table. </td></tr>
    <tr><td class="paramname">xdsID</td><td>The external dataspace ID to unassociate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1906700cc8c18a15eba4749404b03794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1906700cc8c18a15eba4749404b03794">&#9670;&nbsp;</a></span>dspace_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfs__dataspace.html">fs_dataspace</a>* dspace_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the associated dataspace structure given an ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table to get from. </td></tr>
    <tr><td class="paramname">id</td><td>The dataspace ID of the dataspace to get. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Weak pointer to dataspace associated with given dataspace ID. (No ownership) </dd></dl>

</div>
</div>
<a id="ac2be021e2d483a70d9633890b8bd2b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2be021e2d483a70d9633890b8bd2b89">&#9670;&nbsp;</a></span>dspace_get_badge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structfs__dataspace.html">fs_dataspace</a>* dspace_get_badge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>badge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the associated dataspace structure given an unwrapped badge. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table to get from. </td></tr>
    <tr><td class="paramname">badge</td><td>The badge corresponding to dataspace ID of the dataspace to get. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Weak pointer to dataspace associated with given dataspace badge. (No ownership) </dd></dl>

</div>
</div>
<a id="a87effc683d02a21b8259843ddaad8873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87effc683d02a21b8259843ddaad8873">&#9670;&nbsp;</a></span>dspace_table_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dspace_table_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise CPIO dataspace allocation table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table to initialise. (No ownership passed) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1c6c49c2add6c1fcf411c3e1425f562a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6c49c2add6c1fcf411c3e1425f562a">&#9670;&nbsp;</a></span>dspace_table_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dspace_table_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>De-initialise a CPIO dataspace allocation table. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table to release. (No ownership passed, does NOT release the structure) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5d08475638529de668fe90a0bf23b858"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d08475638529de668fe90a0bf23b858">&#9670;&nbsp;</a></span>dspace_window_associate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dspace_window_associate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>winID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dsID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dsOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">seL4_CPtr&#160;</td>
          <td class="paramname"><em>windowCap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Associate given window with the dataspace. </p>
<p>When a client maps one of out CPIO dataspaces to its window, we notify the memory manager (ie. the process server) that we are acting as the pager for this window. This function does the book-keeping of window ――▶ dataspace, so when the procserv notifies us to act as the pager, we know which dataspace are supposed to be mapped into which faulting window.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table. </td></tr>
    <tr><td class="paramname">winID</td><td>The window ID to associate this dataspace with. </td></tr>
    <tr><td class="paramname">dsID</td><td>The dataspace to associate with given window. </td></tr>
    <tr><td class="paramname">dsOffset</td><td>The offset into the dataspace, at which it is mapped into the window. </td></tr>
    <tr><td class="paramname">windowCap</td><td>Capability to the window, corresponding to given windowID. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESUCCESS on success, refos_err_t otherwise. </dd></dl>

</div>
</div>
<a id="a26b76842c14e9cc93610e2901cbe8bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b76842c14e9cc93610e2901cbe8bd2">&#9670;&nbsp;</a></span>dspace_window_find()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdataspace__association__info.html">dataspace_association_info</a>* dspace_window_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>winID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the dataspace associated with given windowID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table. </td></tr>
    <tr><td class="paramname">winID</td><td>The window ID of window to find associated dataspace for. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab4acbaffed8e567e4d9e45a53bdf6396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4acbaffed8e567e4d9e45a53bdf6396">&#9670;&nbsp;</a></span>dspace_window_unassociate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dspace_window_unassociate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structfs__dataspace__table.html">fs_dataspace_table</a> *&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>winID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Un-associate given window with previously associated dataspace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The dspace table. </td></tr>
    <tr><td class="paramname">winID</td><td>The window ID to unassociate. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li><li class="navelem"><a class="el" href="dir_2f486bb11de8b95608ddad771f90f4ee.html">file_server</a></li><li class="navelem"><a class="el" href="dir_d0265948ecafbf9659da91b35639b300.html">src</a></li><li class="navelem"><a class="el" href="file__server_2src_2dataspace_8h.html">dataspace.h</a></li>
    <li class="footer">Generated on Sat Jun 10 2023 10:14:23 for RefOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
