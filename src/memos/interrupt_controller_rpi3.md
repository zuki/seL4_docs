# rapi3b+のデバイスツリーの割り込み関連の調査

## 割り込みコントローラは2つ

|node | phandle | compatible | parent |
|:----|:-------:|:-----------|:------:|
| local_intc@40000000 | 0x18 | brcm,bcm2836-l1-intc | 0x18 |
|interrupt-controller@7e00b200 | 0x01 | brcm,bcm2836-armctrl-ic | 0x18 |

## クライアント

### `phandle = <0x18>`のクライアント

- 1stセル: 割り込み番号
- 2ndセル: トリガータイプ/レベル - 4: actvie-low レベルセンシティブ

|node | interrupts |
|:----|:----------:|
| interrupt-controller@7e00b200 | <0x08 0x04> |
| arm-pmu | <0x09 0x04> |
| timer | <0x00 0x04 0x01 0x04 0x03 0x04 0x02 0x04> |

### `phandle = <0x01>`のクライアント

- 1stセル: 割り込みバンク - 0: IRQ基本保留, 1: IRQ保留1, 2: IRQ保留2
- 2ndセル: バンク内の割り込み番号

|node | interrupts |
|:----|:----------:|
| timer@7e003000 | <0x01 0x00 0x01 0x01 0x01 0x02 0x01 0x03> |
| txp@7e004000 | <0x01 0x0b> |
| mailbox@7e00b880 | <0x00 0x01> |
| gpio@7e200000 | <0x02 0x11 0x02 0x12> |
| serial@7e201000 | <0x02 0x19> |
| mmc@7e202000 | <0x02 0x18> |
| spi@7e204000 | <0x02 0x16> |
| i2c@7e205000 | <0x02 0x15> |
| dsi@7e209000 | <0x02 0x04> |
| serial@7e215040 | <0x01 0x1d> |
| spi@7e215080 | <0x01 0x1d> |
| spi@7e2150c0 | <0x01 0x1d> |
| mmc@7e300000 | <0x02 0x1e> |
| hvs@7e400000 | <0x02 0x01> |
| dsi@7e700000 | <0x02 0x0c> |
| i2c@7e804000 | <0x02 0x15> |
| usb@7e980000 | <0x01 0x09 0x02 0x00> |
| dma@7e007000 | <0x01 0x10 0x01 0x11 0x01 0x12 0x01 0x13 0x01 0x14 0x01 0x15 0x01 0x16 0x01 0x17 0x01 0x18 0x01 0x19 0x01 0x1a 0x01 0x1b 0x01 0x1b 0x01 0x1b 0x01 0x1b 0x01 0x1c> |
| rng@7e104000 | <0x02 0x1d> |
| pixelvalve@7e206000 | <0x02 0x0d> |
| pixelvalve@7e207000 | <0x02 0x0e> |
| i2c@7e805000 | <0x02 0x15> |
| vec@7e806000 | <0x02 0x1b> |
| pixelvalve@7e807000 | <0x02 0x0a> |
| hdmi@7e902000 | <0x02 0x08 0x02 0x09> |
| v3d@7ec00000 | <0x01 0x0a> |
| mmcnr@7e300000 | <0x02 0x1e> |
| firmwarekms@7e600000 | <0x02 0x10> |
| smi@7e600000 | <0x02 0x10> |
| csi@7e800000 | <0x02 0x06> |
| csi@7e801000 | <0x02 0x07> |
| mailbox@7e00b840 | <0x00 0x02> |
